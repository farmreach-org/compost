import{d as g,B as b,C as y,af as C,l as f,U as x,c as v,a as s,b as B,e as o,w as a,h as p,F as $,o as r,Z as j,f as c,t as m,r as D,g as k,m as _}from"./app.17a8bbe4.js";import{_ as O}from"./Admin.fc0f4e28.js";import{u as N}from"./useRouter.64f79ca8.js";import{_ as V}from"./PageHeader.cbe4fcaf.js";import{_ as S}from"./WebhookAction.89b4d50f.js";import{_ as T}from"./Panel.1e5e6be2.js";import{_ as F}from"./Flex.4b1efe4e.js";import{_ as I}from"./Pagination.963a6d77.js";import{_ as P}from"./NoResult.a422d351.js";import{_ as q,a as E}from"./WebhookDeliveryItemView.da65296c.js";import{T as L,_ as w}from"./Tab.46ca3863.js";import"./UserMenu.1170533d.js";import"./DropdownItem.409573e1.js";import"./Avatar.0b768219.js";import"./PencilSquare.b8b4716b.js";import"./Badge.82f1358a.js";import"./QueueList.1a33fea2.js";import"./Trash.0f2ffd20.js";import"./ChevronLeft.fe9869cf.js";import"./Clock.08fc0188.js";import"./SectionTitle.06d0ffc9.js";import"./SectionBorder.9e4fdf42.js";import"./Refresh.b96d0217.js";const M={class:"w-full mx-auto row-py"},R={class:"text-gray-500"},U={class:"row-px"},W={class:"w-full mt-lg"},Z={class:"w-full md:w-1/2 border-r border-gray-100"},z={class:"w-full md:w-1/2"},A={key:0,class:"mt-lg"},G=g({layout:O}),we=Object.assign(G,{__name:"WebhookDeliveries",props:{filter:{type:Object,default:{}},webhook:{type:Object,required:!0},deliveries:{type:Object}},setup(e){const u=e;_("routePrefix"),_("confirmation"),_("authPasswordConfirmation"),N();const n=b({status:u.filter.status}),d=b(null);y(()=>{u.deliveries.data.length&&h(u.deliveries.data[0])});const h=t=>{d.value=t};return C(()=>f.exports.cloneDeep(n.value),f.exports.throttle(()=>{x.get(route("mixpost.system.webhooks.deliveries.index",{workspace:workspaceCtx.id,webhook:u.webhook.id}),f.exports.pickBy(n.value),{preserveState:!0,preserveScroll:!0,only:["deliveries","filter"]})},300)),(t,l)=>(r(),v($,null,[s(B(j),{title:t.$t("webhook.deliveries")},null,8,["title"]),o("div",M,[s(V,{title:t.$t("webhook.deliveries")},{description:a(()=>[c(m(e.webhook.name)+" ",1),o("div",R,m(e.webhook.callback_url),1)]),default:a(()=>[s(S,{record:e.webhook,create:!1,deliveries:!1},null,8,["record"])]),_:1},8,["title"]),o("div",U,[o("div",W,[s(L,null,{default:a(()=>[s(w,{onClick:l[0]||(l[0]=i=>n.value.status=null),active:!t.$page.props.filter.status},{default:a(()=>[c(m(t.$t("general.all")),1)]),_:1},8,["active"]),s(w,{onClick:l[1]||(l[1]=i=>n.value.status="success"),active:t.$page.props.filter.status==="success"},{default:a(()=>[c(m(t.$t("general.succeeded")),1)]),_:1},8,["active"]),s(w,{onClick:l[2]||(l[2]=i=>n.value.status="error"),active:t.$page.props.filter.status==="error"},{default:a(()=>[c(m(t.$t("general.failed")),1)]),_:1},8,["active"])]),_:1})]),s(T,{class:"mt-lg","with-padding":!1},{default:a(()=>[s(F,{gap:"gap-0"},{default:a(()=>[o("div",Z,[(r(!0),v($,null,D(e.deliveries.data,i=>(r(),k(q,{key:i.id,item:i,active:d.value&&d.value.id===i.id,onClick:H=>h(i)},null,8,["item","active","onClick"]))),128)),e.deliveries.meta.total?p("",!0):(r(),k(P,{key:0,class:"py-md px-md"}))]),o("div",z,[d.value?(r(),k(E,{key:0,webhookId:e.webhook.id,delivery:d.value},null,8,["webhookId","delivery"])):p("",!0)])]),_:1})]),_:1}),e.deliveries.meta.links.length>3?(r(),v("div",A,[s(I,{meta:e.deliveries.meta,links:e.deliveries.links},null,8,["meta","links"])])):p("",!0)])])],64))}});export{we as default};
