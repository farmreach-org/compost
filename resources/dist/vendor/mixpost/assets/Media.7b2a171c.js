import{B as b,H as y,c as D,a,b as l,e as p,w as t,ce as E,F as x,m as F,o as u,Z as O,r as z,g as _,f as i,t as r,I as H,a0 as h,S as Q,R,h as U,a1 as Z,U as q,Q as G}from"./app.17a8bbe4.js";import{u as J}from"./usePostVersions.ae0fd213.js";import{u as K,_ as W,a as X,b as Y}from"./MediaGifs.7235e76d.js";import{_ as ee}from"./PageHeader.cbe4fcaf.js";import{T as se,_ as te}from"./Tab.46ca3863.js";import{_ as ae}from"./SelectableBar.54da362b.js";import{_ as oe}from"./PureDangerButton.0dbbc01d.js";import{_ as le}from"./Panel.1e5e6be2.js";import{T as ie}from"./Trash.0f2ffd20.js";import"./index.browser.89e24408.js";import"./Masonry.f60a1546.js";import"./MediaFile.b8493171.js";import"./ExclamationCircle.dd1367ec.js";import"./SectionTitle.06d0ffc9.js";import"./SearchInput.1ad6cb85.js";import"./NoResult.a422d351.js";import"./Alert.43894852.js";import"./Flex.4b1efe4e.js";const re={class:"w-full mx-auto row-py mb-2xl"},ne={class:"w-full row-px"},me={class:"w-full row-px mt-lg"},Be={__name:"Media",setup(de){const v=F("workspaceCtx"),{activeTab:n,tabs:P,isDownloading:$,isDeleting:w,downloadExternal:T,deletePermanently:B,getMediaCrediting:I}=K("mixpost.media.fetchStock",{workspace:v.id}),L={uploads:W,stock:X,gifs:Y},m=b(),V=y(()=>L[n.value]),c=y(()=>m.value?m.value.selected:[]),g=()=>{m.value.deselectAll()},N=()=>{const e=n.value!=="uploads";e&&T(c.value.map(s=>{const{id:f,url:o,source:C,author:j,download_data:A}=s;return{id:f,url:o,source:C,author:j,download_data:A}}),s=>{k(s.data)}),e||k(c.value)},{versionObject:S}=J(),k=e=>{q.post(route("mixpost.posts.store",{workspace:v.id}),{versions:[S(0,!0,I(e),e.map(s=>s.id))]})},d=b(!1),M=()=>{const e=c.value.map(s=>s.id);B(e,()=>{g(),m.value.removeItems(e),d.value=!1})};return(e,s)=>{const f=G("tooltip");return u(),D(x,null,[a(l(O),{title:e.$t("media.media_library")},null,8,["title"]),p("div",re,[a(ee,{title:e.$t("media.media_library")},null,8,["title"]),p("div",ne,[a(se,null,{default:t(()=>[(u(!0),D(x,null,z(l(P),o=>(u(),_(te,{key:o,onClick:C=>n.value=o,active:l(n)===o},{default:t(()=>[i(r(e.$t(`media.${o}`)),1)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),p("div",me,[a(le,null,{default:t(()=>[(u(),_(H(l(V)),{ref_key:"sourceProperties",ref:m,columns:4},null,512)),a(ae,{count:l(c).length,onClose:s[1]||(s[1]=o=>g())},{default:t(()=>[a(h,{onClick:N,isLoading:l($),disabled:l($),class:"mr-sm rtl:mr-0 rtl:ml-sm",size:"xs"},{icon:t(()=>[a(Q)]),default:t(()=>[i(" "+r(e.$t("media.create_post")),1)]),_:1},8,["isLoading","disabled"]),l(n)==="uploads"?R((u(),_(oe,{key:0,onClick:s[0]||(s[0]=o=>d.value=!0)},{default:t(()=>[a(ie)]),_:1})),[[f,e.$t("general.delete")]]):U("",!0)]),_:1},8,["count"])]),_:1})])]),a(E,{show:d.value,variant:"danger",onClose:s[3]||(s[3]=o=>d.value=!1)},{header:t(()=>[i(r(e.$t("media.delete_media")),1)]),body:t(()=>[i(r(e.$t("media.do_you_want_delete")),1)]),footer:t(()=>[a(h,{onClick:s[2]||(s[2]=o=>d.value=!1),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:t(()=>[i(r(e.$t("general.cancel")),1)]),_:1}),a(Z,{isLoading:l(w),disabled:l(w),onClick:M},{default:t(()=>[i(r(e.$t("general.delete")),1)]),_:1},8,["isLoading","disabled"])]),_:1},8,["show"])],64)}}};export{Be as default};
