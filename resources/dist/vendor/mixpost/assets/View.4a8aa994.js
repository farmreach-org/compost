import{m as w,B as x,l as F,aj as D,o as h,c as y,a as s,w as e,f as o,t as a,T as U,S as E,a0 as S,b as r,j,ac as T,F as V,g as b,r as I,e as $,R as M,U as A,Q as q,d as Q,u as Z,O as G,Z as H,i as J,a1 as K,h as X,_ as C,n as Y}from"./app.17a8bbe4.js";import{_ as ee}from"./Admin.fc0f4e28.js";import{_ as se}from"./PageHeader.cbe4fcaf.js";import{_ as B}from"./Panel.1e5e6be2.js";import{_ as te}from"./Badge.82f1358a.js";import{a as ae,_ as L}from"./DropdownItem.409573e1.js";import{P as N}from"./PencilSquare.b8b4716b.js";import{T as O}from"./Trash.0f2ffd20.js";import{_ as oe}from"./NoResult.a422d351.js";import{_ as le}from"./DropdownButton.f5aff106.js";import{_ as R}from"./UserRole.bb67af2b.js";import{a as W,_,T as re}from"./TableCell.5981e30d.js";import{_ as ne}from"./Avatar.0b768219.js";import{E as ie}from"./Eye.e20c1588.js";import{_ as ue}from"./PureButtonLink.d6da9c4f.js";import"./UserMenu.1170533d.js";import"./QueueList.1a33fea2.js";import"./Flex.4b1efe4e.js";import"./EllipsisVertical.4969c8de.js";import"./Radio.8545682f.js";const ce={class:"relative w-full"},de={__name:"SelectWorkspace",props:{modelValue:{default:null},workspaces:{type:Array,default:[]},exclude:{type:Array,default:[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:v}){const l=n,m=w("routePrefix"),p=x(l.workspaces),u=(i,c)=>{!i||(c(!0),k(c,i))},k=F.exports.throttle((i,c)=>{axios.get(route(`${m}.workspaces.resources.items`),{params:{keyword:c,exclude:l.exclude}}).then(d=>{i(!1),p.value=d.data.data.map(t=>({key:t.uuid,label:t.name}))})},350);return(i,c)=>{const d=D("v-select");return h(),y("div",ce,[s(d,{modelValue:n.modelValue,"onUpdate:modelValue":c[0]||(c[0]=t=>i.$emit("update:modelValue",t)),options:p.value,filterable:!1,"close-on-select":!0,disabled:n.disabled,placeholder:i.$t("workspace.type_search_workspace"),onSearch:u},{"no-options":e(({search:t,searching:g,loading:P})=>[o(a(i.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","disabled","placeholder"])])}}},me={__name:"AttachWorkspace",props:{user:{type:Object},attachedWorkspaces:{type:Array,default:[]}},setup(n){const v=n;w("routePrefix");const l=x(null),m=U({user_id:v.user.id,role:"admin"}),p=()=>{m.post(route("mixpost.workspaces.users.store",{workspace:l.value.key}),{preserveScroll:!0,onSuccess(){i(),m.reset()}})},u=x(!1),k=()=>{u.value=!0},i=()=>{u.value=!1,l.value=null};return(c,d)=>(h(),y(V,null,[s(S,{onClick:k,size:"sm"},{icon:e(()=>[s(E)]),default:e(()=>[o(" "+a(c.$t("team.attach")),1)]),_:1}),s(T,{show:u.value,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:i},{header:e(()=>[o(a(c.$t("team.attach_workspace")),1)]),body:e(()=>[s(de,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=t=>l.value=t),exclude:n.attachedWorkspaces},null,8,["modelValue","exclude"]),s(R,{modelValue:r(m).role,"onUpdate:modelValue":d[1]||(d[1]=t=>r(m).role=t),class:"mt-lg"},null,8,["modelValue"])]),footer:e(()=>[s(S,{onClick:i,class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[o(a(c.$t("general.cancel")),1)]),_:1}),s(j,{onClick:p,disabled:!l.value||r(m).processing,isLoading:r(m).processing},{default:e(()=>[o(a(c.$t("team.attach")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},fe={class:"flex justify-start"},pe={class:"capitalize"},_e={class:"flex justify-end"},he={__name:"UserWorkspaces",props:{user:{type:Object}},setup(n){const v=n,l=w("routePrefix"),m=w("confirmation"),p=x(null),u=U({user_id:v.user.id,role:"admin"}),k=t=>{u.role=t.pivot.role,p.value=t},i=()=>{p.value=null},c=t=>{m().title($t("team.detach_workspace")).description($t("team.detach_confirm",{workspace:t.name,user:v.user.name})).destructive().btnConfirmName($t("admin.detach")).onConfirm(g=>{g.isLoading(!0),A.delete(route(`${l}.workspaces.users.delete`,{workspace:t.uuid}),{data:{user_id:v.user.id},preserveScroll:!0,onSuccess(){g.reset()},onFinish(){g.isLoading(!1)}})}).show()},d=()=>{u.put(route(`${l}.workspaces.users.update`,{workspace:p.value.uuid}),{data:{user_id:v.user.id},preserveScroll:!0,onSuccess(){u.reset(),i()}})};return(t,g)=>{const P=q("tooltip");return h(),y(V,null,[s(B,null,{title:e(()=>[o(a(t.$t("workspace.workspaces")),1)]),action:e(()=>[s(me,{user:n.user,attachedWorkspaces:n.user.workspaces.map(f=>f.uuid)},null,8,["user","attachedWorkspaces"])]),default:e(()=>[n.user.workspaces.length?(h(),b(re,{key:0},{head:e(()=>[s(W,null,{default:e(()=>[s(_,{component:"th",scope:"col"}),s(_,{component:"th",scope:"col"},{default:e(()=>[o(a(t.$t("general.name")),1)]),_:1}),s(_,{component:"th",scope:"col"},{default:e(()=>[o(a(t.$t("team.role")),1)]),_:1}),s(_,{component:"th",scope:"col"},{default:e(()=>[o(a(t.$t("team.attached_at")),1)]),_:1}),s(_,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(h(!0),y(V,null,I(n.user.workspaces,f=>(h(),b(W,{key:f.id,hoverable:!0},{default:e(()=>[s(_,{align:"left"},{default:e(()=>[$("div",fe,[s(ne,{backgroundColor:f.hex_color,name:f.name,roundedClass:"rounded-lg"},null,8,["backgroundColor","name"])])]),_:2},1024),s(_,null,{default:e(()=>[$("div",null,a(f.name),1)]),_:2},1024),s(_,null,{default:e(()=>[s(te,null,{default:e(()=>[$("span",pe,a(f.pivot.role),1)]),_:2},1024)]),_:2},1024),s(_,null,{default:e(()=>[o(a(f.pivot.joined_at),1)]),_:2},1024),s(_,{align:"right"},{default:e(()=>[$("div",_e,[M((h(),b(ue,{href:t.route(`${r(l)}.workspaces.view`,{workspace:f.uuid}),class:"mr-xs"},{default:e(()=>[s(ie)]),_:2},1032,["href"])),[[P,t.$t("general.view")]]),s(ae,{"width-classes":"w-32",placement:"bottom-end"},{trigger:e(()=>[s(le)]),content:e(()=>[s(L,{onClick:z=>k(f),as:"button"},{default:e(()=>[s(N,{class:"mr-xs"}),o(" "+a(t.$t("team.edit_role")),1)]),_:2},1032,["onClick"]),s(L,{onClick:z=>c(f),as:"button"},{default:e(()=>[s(O,{class:"text-red-500 mr-xs"}),o(" "+a(t.$t("general.detach")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(h(),b(oe,{key:1}))]),_:1}),s(T,{show:p.value!==null,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:i},{header:e(()=>[o(a(t.$t("team.edit_role_on"))+" ",1),$("strong",null,a(p.value.name),1),o(" "+a(t.$t("workspace.workspaces")),1)]),body:e(()=>[s(R,{modelValue:r(u).role,"onUpdate:modelValue":g[0]||(g[0]=f=>r(u).role=f),class:"mt-lg"},null,8,["modelValue"])]),footer:e(()=>[s(S,{onClick:i,class:"mr-xs"},{default:e(()=>[o(a(t.$t("general.cancel")),1)]),_:1}),s(j,{onClick:d,disabled:r(u).processing,isLoading:r(u).processing},{default:e(()=>[o(a(t.$t("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64)}}},$e={class:"w-full mx-auto row-py"},ve={class:"flex items-center"},ke={class:"row-px"},ge={class:"md:max-w-2xl"},we={class:"mt-lg"},be=Q({layout:ee}),Ie=Object.assign(be,{__name:"View",props:{user:{type:Object}},setup(n){const v=n,{t:l}=Z(),m=w("routePrefix"),p=w("confirmation"),u=l("user.view_user"),{notify:k}=Y(),{user:i}=G(),c=()=>{p().title(l("user.delete_users")).description(l("user.confirm_delete_user")).destructive().onConfirm(d=>{d.isLoading(!0),A.delete(route(`${m}.users.delete`,{user:v.user.id}),{onSuccess(t){t.props.flash.error||k("success",l("user.user_deleted"))},onFinish(){d.isLoading(!1)}})}).show()};return(d,t)=>(h(),y(V,null,[s(r(H),{title:r(u)},null,8,["title"]),$("div",$e,[s(se,{title:r(u)},{description:e(()=>[o(a(n.user.name),1)]),default:e(()=>[$("div",ve,[s(r(J),{href:d.route(`${r(m)}.users.edit`,{user:n.user.id}),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[s(j,{size:"sm"},{icon:e(()=>[s(N)]),default:e(()=>[o(" "+a(r(l)("general.edit")),1)]),_:1})]),_:1},8,["href"]),r(i).id!==n.user.id?(h(),b(K,{key:0,onClick:c,size:"sm"},{icon:e(()=>[s(O)]),_:1})):X("",!0)])]),_:1},8,["title"]),$("div",ke,[s(B,null,{title:e(()=>[o(a(r(l)("user.user_details")),1)]),default:e(()=>[$("div",ge,[s(C,null,{title:e(()=>[o(a(r(l)("general.name")),1)]),default:e(()=>[o(" "+a(n.user.name),1)]),_:1}),s(C,{class:"mt-md"},{title:e(()=>[o(a(r(l)("general.email")),1)]),default:e(()=>[o(" "+a(n.user.email),1)]),_:1}),s(C,{class:"mt-md"},{title:e(()=>[o(a(r(l)("general.created_at")),1)]),default:e(()=>[o(" "+a(n.user.created_at),1)]),_:1}),s(C,{class:"mt-md"},{title:e(()=>[o(a(r(l)("user.system_admin")),1)]),default:e(()=>[o(" "+a(n.user.is_admin?r(l)("general.yes"):r(l)("general.no")),1)]),_:1})])]),_:1}),$("div",we,[s(he,{user:n.user},null,8,["user"])])])])],64))}});export{Ie as default};
