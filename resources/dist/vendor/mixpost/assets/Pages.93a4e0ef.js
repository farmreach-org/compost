import{u as T,m as P,I as M,Y as E,o as f,c as S,e as p,S as G,b as a,g as v,w as e,a as t,af as q,aj as W,f as l,t as o,ag as X,ak as J,cb as j,n as U,A as ee,am as A,a5 as te,T as ae,ao as L,V as x,R as B,h as K,aa as I,ab as se,F as O,d as le,J as oe,ad as re,ae as ne,Z as ie,i as ue,j as de,aB as N,r as ce}from"./app.af17fce1.js";import{_ as me}from"./Admin.ea7882ea.js";import{u as _e}from"./useSelectable.79aa5ce8.js";import{_ as fe}from"./PageHeader.fa50e47e.js";import{_ as pe}from"./PureDangerButton.27630a26.js";import{_ as ge}from"./Panel.46137120.js";import{_ as R}from"./Checkbox.6f71d79b.js";import{_,a as Y,T as he}from"./TableCell.387d3662.js";import{_ as be}from"./SelectableBar.4086aab5.js";import{_ as $e}from"./NoResult.ab0b21a6.js";import{T as Z}from"./Trash.ee5d54c5.js";import{_ as ve}from"./DropdownButton.19db68d6.js";import{_ as ke}from"./PureButtonLink.dbcc593f.js";import{A as ye}from"./ArrowTopRightOnSquare.170f472d.js";import{_ as w}from"./VerticalGroup.52259a52.js";import{_ as D}from"./LabelSuffix.b035370b.js";import{_ as F}from"./SuccessButton.a0eec8c9.js";import{_ as xe}from"./UploadButton.b065008f.js";import{_ as we}from"./Flex.16a0de6f.js";import"./QueueList.3a1b730e.js";import"./EllipsisVertical.42e3e8f4.js";const Pe={class:"flex flex-row items-center justify-end gap-xs"},Se={__name:"PageItemAction",props:{itemId:{type:String,required:!0},urlPath:{type:String,required:!0}},emits:["onDelete"],setup(i,{emit:r}){const n=i,{t:c}=T(),h=P("routePrefix"),$=P("confirmation"),{notify:y}=U(),g=M(!1),s=()=>{$().title(c("page.delete_pages")).description(c("page.confirm_delete_pages")).destructive().onConfirm(m=>{m.isLoading(!0),J.delete(route(`${h}.pages.delete`,{page:n.itemId}),{onSuccess(){g.value=!1,y("success",c("page.page_deleted")),r("onDelete"),j.emit("pageDelete",n.itemId),m.reset()},onFinish(){m.close()}})}).show()};return(m,V)=>{const u=E("tooltip");return f(),S("div",null,[p("div",Pe,[G((f(),v(ke,{href:m.route(`${a(h)}.pages.show`,{slug:i.urlPath}),native:!0,target:"_blank"},{default:e(()=>[t(ye)]),_:1},8,["href"])),[[u,a(c)("general.open")]]),t(X,{"width-classes":"w-32",placement:"bottom-end"},{trigger:e(()=>[t(ve)]),content:e(()=>[t(q,{href:m.route(`${a(h)}.pages.edit`,{page:i.itemId})},{icon:e(()=>[t(W)]),default:e(()=>[l(" "+o(a(c)("general.edit")),1)]),_:1},8,["href"]),t(q,{onClick:s,as:"button"},{icon:e(()=>[t(Z,{class:"text-red-500"})]),default:e(()=>[l(" "+o(a(c)("general.delete")),1)]),_:1})]),_:1})])])}}},Ve={__name:"PageItem",props:{item:{type:Object,required:!0}},setup(i){return(r,n)=>(f(),v(Y,{hoverable:!0},{default:e(()=>[t(_,{class:"w-10"},{default:e(()=>[ee(r.$slots,"checkbox")]),_:3}),t(_,null,{default:e(()=>[l(o(i.item.name),1)]),_:1}),t(_,null,{default:e(()=>[l(o(i.item.slug),1)]),_:1}),t(_,null,{default:e(()=>[i.item.status?(f(),v(A,{key:0,variant:"success"},{default:e(()=>[l(o(r.$t("general.enabled")),1)]),_:1})):(f(),v(A,{key:1,variant:"error"},{default:e(()=>[l(o(r.$t("general.disabled")),1)]),_:1}))]),_:1}),t(_,null,{default:e(()=>[l(o(i.item.created_at),1)]),_:1}),t(_,null,{default:e(()=>[t(Se,{itemId:i.item.uuid,urlPath:i.item.url_path},null,8,["itemId","urlPath"])]),_:1})]),_:3}))}},Ce={for:"brand_name"},Ie=["src"],De={for:"brand_name"},je={for:"email"},Oe={for:"register_url"},Re={class:"ml-xs"},Te={__name:"GeneratePageSamples",setup(i){const{t:r}=T(),n=P("routePrefix"),c=M(!1),h=()=>{c.value=!0},$=()=>{c.value=!1},{user:y}=te(),{notify:g}=U(),s=ae({logo_url:L().props.mixpost.theme.logo,brand_name:L().props.app.name,email:y.value.email,register_url:"",destroy:!1}),m=()=>{s.post(route(`${n}.pages.generateSamples`),{preserveScroll:!0,onSuccess(){g("success",r("page.sample_pages_generated")),$(),s.reset()}})};return(V,u)=>(f(),S(O,null,[t(F,{onClick:h},{default:e(()=>[l(o(a(r)("page.generate_samples")),1)]),_:1}),t(se,{show:c.value,"max-width":"sm",closeable:!0,"scrollable-body":!0,onClose:$},{header:e(()=>[l(o(a(r)("page.generate_page_samples")),1)]),body:e(()=>[t(w,null,{title:e(()=>[p("label",Ce,[l(o(a(r)("page.brand_logo"))+" ",1),t(D,{danger:!0},{default:e(()=>[l("*")]),_:1})])]),footer:e(()=>[t(x,{message:a(s).errors.logo_url},null,8,["message"])]),default:e(()=>[p("div",null,[t(xe,{withPreload:!0,onUpload:u[0]||(u[0]=d=>{if(d.is_local_driver){a(s).logo_url=`/storage/${d.path}`;return}a(s).logo_url=d.url})},{default:e(()=>[t(B,null,{default:e(()=>[l(o(a(r)("general.upload")),1)]),_:1})]),_:1}),a(s).logo_url?(f(),S("img",{key:0,src:a(s).logo_url,class:"w-auto max-h-20 mt-xs",alt:"Logo"},null,8,Ie)):K("",!0)])]),_:1}),t(w,{class:"mt-lg"},{title:e(()=>[p("label",De,[l(o(a(r)("page.brand_name"))+" ",1),t(D,{danger:!0},{default:e(()=>[l("*")]),_:1})])]),footer:e(()=>[t(x,{message:a(s).errors.brand_name},null,8,["message"])]),default:e(()=>[t(I,{type:"text",modelValue:a(s).brand_name,"onUpdate:modelValue":u[1]||(u[1]=d=>a(s).brand_name=d),error:a(s).errors.brand_name,id:"brand_name"},null,8,["modelValue","error"])]),_:1}),t(w,{class:"mt-lg"},{title:e(()=>[p("label",je,[l(o(a(r)("page.contact_email"))+" ",1),t(D,{danger:!0},{default:e(()=>[l("*")]),_:1})])]),footer:e(()=>[t(x,{message:a(s).errors.email},null,8,["message"])]),default:e(()=>[t(I,{type:"text",modelValue:a(s).email,"onUpdate:modelValue":u[2]||(u[2]=d=>a(s).email=d),error:a(s).errors.email,id:"email"},null,8,["modelValue","error"])]),_:1}),t(w,{class:"mt-lg"},{title:e(()=>[p("label",Oe,o(a(r)("page.register_url")),1)]),footer:e(()=>[t(x,{message:a(s).errors.register_url},null,8,["message"])]),default:e(()=>[t(I,{type:"text",modelValue:a(s).register_url,"onUpdate:modelValue":u[3]||(u[3]=d=>a(s).register_url=d),error:a(s).errors.register_url,id:"register_url"},null,8,["modelValue","error"])]),_:1}),t(w,{class:"mt-lg"},{footer:e(()=>[t(x,{message:a(s).errors.destroy},null,8,["message"])]),default:e(()=>[p("label",null,[t(R,{checked:a(s).destroy,"onUpdate:checked":u[4]||(u[4]=d=>a(s).destroy=d),value:!1},null,8,["checked"]),p("span",Re,o(a(r)("page.destroy_existing_pages")),1)])]),_:1})]),footer:e(()=>[t(B,{onClick:$,class:"mr-xs"},{default:e(()=>[l(o(a(r)("general.cancel")),1)]),_:1}),t(F,{onClick:m,disabled:a(s).processing,isLoading:a(s).processing},{default:e(()=>[l(o(a(r)("page.generate")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},Ue={class:"w-full mx-auto row-py"},qe={class:"mt-lg row-px w-full"},Ae=le({layout:me}),ot=Object.assign(Ae,{__name:"Pages",props:{pages:{type:Object}},setup(i){const r=i,{t:n}=T(),c=P("routePrefix"),h=n("page.pages"),{notify:$}=U(),y=P("confirmation"),{selectedRecords:g,putPageRecords:s,toggleSelectRecordsOnPage:m,deselectRecord:V,deselectAllRecords:u}=_e(),d=()=>r.pages.data.map(b=>b.uuid);oe(()=>{s(d()),j.on("pageDelete",b=>{V(b)})}),re(()=>{j.off("pageDelete")}),ne(()=>r.pages.data,()=>{s(d())});const z=()=>{y().title(n("page.delete_pages")).description(n("page.confirm_delete_pages")).destructive().onConfirm(b=>{b.isLoading(!0),J.delete(route(`${c}.pages.deleteMultiple`),{data:{pages:g.value},preserveScroll:!0,onSuccess(){u(),$("success",n("page.pages_deleted"))},onFinish(){b.reset()}})}).show()};return(b,C)=>{const H=E("tooltip");return f(),S(O,null,[t(a(ie),{title:a(h)},null,8,["title"]),p("div",Ue,[t(fe,{title:a(h)},{description:e(()=>[l(o(a(n)("page.page_desc")),1)]),default:e(()=>[t(Te)]),_:1},8,["title"]),p("div",qe,[t(be,{count:a(g).length,onClose:a(u)},{default:e(()=>[G((f(),v(pe,{onClick:z},{default:e(()=>[t(Z)]),_:1})),[[H,a(n)("general.delete")]])]),_:1},8,["count","onClose"]),t(we,null,{default:e(()=>[t(a(ue),{href:b.route(`${a(c)}.pages.create`),class:"mb-xs sm:mb-0"},{default:e(()=>[t(de,null,{default:e(()=>[l(o(a(n)("page.create_page")),1)]),_:1})]),_:1},8,["href"])]),_:1}),t(ge,{"with-padding":!1,class:"mt-lg"},{default:e(()=>[t(he,null,{head:e(()=>[t(Y,null,{default:e(()=>[t(_,{component:"th",scope:"col",class:"w-10"},{default:e(()=>[t(R,{checked:a(m),"onUpdate:checked":C[0]||(C[0]=k=>N(m)?m.value=k:null),disabled:!i.pages.data.length},null,8,["checked","disabled"])]),_:1}),t(_,{component:"th",scope:"col"},{default:e(()=>[l(o(a(n)("general.name")),1)]),_:1}),t(_,{component:"th",scope:"col"},{default:e(()=>[l(o(a(n)("page.url_path")),1)]),_:1}),t(_,{component:"th",scope:"col"},{default:e(()=>[l(o(a(n)("general.status")),1)]),_:1}),t(_,{component:"th",scope:"col"},{default:e(()=>[l(o(a(n)("general.created_at")),1)]),_:1}),t(_,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(f(!0),S(O,null,ce(i.pages.data,k=>(f(),v(Ve,{key:k.uuid,item:k,onOnDelete:()=>{a(V)(k.uuid)}},{checkbox:e(()=>[t(R,{checked:a(g),"onUpdate:checked":C[1]||(C[1]=Q=>N(g)?g.value=Q:null),value:k.uuid},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),i.pages.data.length?K("",!0):(f(),v($e,{key:0,class:"p-md"},{default:e(()=>[l(o(a(n)("page.no_pages_found")),1)]),_:1}))]),_:1})])])],64)}}});export{ot as default};
