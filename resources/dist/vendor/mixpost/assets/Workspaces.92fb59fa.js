import{u as L,m as j,O as X,B as M,Q as U,o as l,c as h,e as y,R as D,b as s,g as w,w as t,a as e,f as m,t as d,U as O,c5 as S,n as z,H as P,l as V,y as Y,F as R,r as H,A as ee,h as b,d as te,C as se,ae as oe,af as W,Z as ae,i as re,j as le,aw as A}from"./app.17a8bbe4.js";import{u as ne}from"./UserMenu.1170533d.js";import{u as ce}from"./useSelectable.a2aaee50.js";import{_ as ie}from"./Admin.fc0f4e28.js";import{_ as ue}from"./PageHeader.cbe4fcaf.js";import{_ as me}from"./PureDangerButton.0dbbc01d.js";import{_ as de}from"./Panel.1e5e6be2.js";import{_ as q}from"./Checkbox.dc42ffe0.js";import{_ as c,a as Q,T as pe}from"./TableCell.5981e30d.js";import{_ as fe}from"./SelectableBar.54da362b.js";import{_ as _e}from"./NoResult.a422d351.js";import{T as Z}from"./Trash.0f2ffd20.js";import{_ as ke}from"./Pagination.963a6d77.js";import{_ as E}from"./Avatar.0b768219.js";import{_ as F}from"./PureButtonLink.d6da9c4f.js";import{E as we}from"./Eye.e20c1588.js";import{P as he}from"./PencilSquare.b8b4716b.js";import{_ as N,a as ge}from"./DropdownItem.409573e1.js";import{_ as $e}from"./DropdownButton.f5aff106.js";import{A as ve}from"./ArrowTopRightOnSquare.98b36170.js";import{_ as ye}from"./SearchInput.1ad6cb85.js";import{_ as be}from"./Alert.43894852.js";import{_ as xe}from"./Flex.4b1efe4e.js";import"./Badge.82f1358a.js";import"./QueueList.1a33fea2.js";import"./ChevronLeft.fe9869cf.js";import"./EllipsisVertical.4969c8de.js";const Ce={class:"flex flex-row items-center justify-end gap-xs"},Ie={__name:"WorkspaceItemAction",props:{itemId:{type:String,required:!0}},emits:["onDelete"],setup(o,{emit:p}){const a=o,{t:r}=L(),i=j("routePrefix"),x=j("confirmation"),{notify:$}=z();X();const _=M(!1),f=()=>{x().title(r("workspace.delete_workspace")).description(r("workspace.confirm_delete_workspace")).destructive().onConfirm(u=>{u.isLoading(!0),O.delete(route(`${i}.workspaces.delete`,{workspace:a.itemId}),{onSuccess(){_.value=!1,$("success",r("workspace.workspace_deleted")),p("onDelete"),S.emit("workspaceDelete",a.itemId),u.reset()},onFinish(){u.isLoading(!1)}})}).show()};return(u,C)=>{const v=U("tooltip");return l(),h("div",null,[y("div",Ce,[D((l(),w(F,{href:u.route("mixpost.switchWorkspace",{workspace:o.itemId,redirect:!0}),method:"post",as:"button",type:"button"},{default:t(()=>[e(ve)]),_:1},8,["href"])),[[v,s(r)("general.open")]]),D((l(),w(F,{href:u.route(`${s(i)}.workspaces.view`,{workspace:o.itemId})},{default:t(()=>[e(we)]),_:1},8,["href"])),[[v,s(r)("general.view")]]),e(ge,{"width-classes":"w-32",placement:"bottom-end"},{trigger:t(()=>[e($e)]),content:t(()=>[e(N,{href:u.route(`${s(i)}.workspaces.edit`,{workspace:o.itemId})},{icon:t(()=>[e(he)]),default:t(()=>[m(" "+d(s(r)("general.edit")),1)]),_:1},8,["href"]),e(N,{onClick:f,as:"button"},{icon:t(()=>[e(Z,{class:"text-red-500"})]),default:t(()=>[m(" "+d(s(r)("general.delete")),1)]),_:1})]),_:1})])])}}},Ve={key:0,class:"flex justify-start"},je={key:0,class:"mt-xs"},De={__name:"WorkspaceItem",props:{item:{type:Object,required:!0}},setup(o){const p=o,a=P(()=>V.exports.sortBy(p.item.users.slice(0,3),"pivot.joined_at")),r=P(()=>p.item.users.slice(3).length);return(i,x)=>{const $=U("tooltip");return l(),w(Q,{hoverable:!0},{default:t(()=>[e(c,{class:"w-10"},{default:t(()=>[Y(i.$slots,"checkbox")]),_:3}),e(c,null,{default:t(()=>[e(E,{backgroundColor:o.item.hex_color,name:o.item.name,roundedClass:"rounded-lg"},null,8,["backgroundColor","name"])]),_:1}),e(c,null,{default:t(()=>[y("div",null,d(o.item.name),1)]),_:1}),e(c,null,{default:t(()=>[m(d(o.item.created_at),1)]),_:1}),e(c,null,{default:t(()=>[o.item.users.length?(l(),h("div",Ve,[(l(!0),h(R,null,H(s(a),(_,f)=>D((l(),w(E,{key:_.id,name:_.name,class:ee([{"-ml-6":f>0},"cursor-default mr-xs last:mr-xs"])},null,8,["name","class"])),[[$,_.name]])),128)),s(r)?(l(),h("div",je," +"+d(s(r)),1)):b("",!0)])):b("",!0)]),_:1}),e(c,null,{default:t(()=>[e(Ie,{itemId:o.item.uuid},null,8,["itemId"])]),_:1})]),_:3})}}},Oe={class:"flex items-center"},Se={__name:"Filters",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(o,{emit:p}){return P(()=>0),(a,r)=>(l(),h("div",Oe,[e(ye,{modelValue:o.modelValue.keyword,"onUpdate:modelValue":r[0]||(r[0]=i=>o.modelValue.keyword=i),placeholder:a.$t("general.search")},null,8,["modelValue","placeholder"])]))}},Pe={class:"w-full mx-auto row-py"},Re={class:"mt-lg row-px w-full"},Ue=["href"],Be={key:1,class:"mt-lg"},Te=te({layout:ie}),ut=Object.assign(Te,{__name:"Workspaces",props:{workspaces:{type:Object},filter:{type:Object,default:{}}},setup(o){const p=o,{t:a}=L(),r=j("routePrefix"),i=a("workspace.workspaces"),x=j("confirmation"),{notify:$}=z(),{enterpriseConsole:_}=ne(),{selectedRecords:f,putPageRecords:u,toggleSelectRecordsOnPage:C,deselectRecord:v,deselectAllRecords:B}=ce(),T=()=>p.workspaces.data.map(n=>n.uuid),I=M({keyword:p.filter.keyword});se(()=>{u(T()),S.on("workspaceDelete",n=>{v(n)})}),oe(()=>{S.off("workspaceDelete")}),W(()=>p.workspaces.data,()=>{u(T())}),W(()=>V.exports.cloneDeep(I.value),V.exports.throttle(()=>{O.get(route(`${r}.workspaces.index`),V.exports.pickBy(I.value),{preserveState:!0,only:["workspaces","filter"]})},300));const G=()=>{x().title(a("workspace.delete_workspaces")).description(a("workspace.confirm_delete_workspaces")).destructive().onConfirm(n=>{n.isLoading(!0),O.delete(route(`${r}.workspaces.deleteMultiple`),{data:{workspaces:f.value},preserveScroll:!0,onSuccess(){B(),$("success",a("workspace.workspaces_deleted"))},onFinish(){n.reset()}})}).show()};return(n,g)=>{const J=U("tooltip");return l(),h(R,null,[e(s(ae),{title:s(i)},null,8,["title"]),y("div",Pe,[e(ue,{title:s(i)},{description:t(()=>[m(d(s(a)("workspace.manage_brands_businesses")),1)]),_:1},8,["title"]),y("div",Re,[e(fe,{count:s(f).length,onClose:s(B)},{default:t(()=>[D((l(),w(me,{onClick:G},{default:t(()=>[e(Z)]),_:1})),[[J,s(a)("general.delete")]])]),_:1},8,["count","onClose"]),s(_).url?(l(),w(be,{key:0,variant:"warning",closeable:!1,class:"mb-lg"},{default:t(()=>[m(" Manage Workspaces from the "),y("a",{href:`${s(_).url}/workspaces`,class:"link"},"Enterprise Console",8,Ue),m(" for more business actions. ")]),_:1})):b("",!0),e(xe,{class:"justify-between"},{default:t(()=>[e(s(re),{href:n.route(`${s(r)}.workspaces.create`),class:"mb-xs sm:mb-0"},{default:t(()=>[e(le,null,{default:t(()=>[m(d(s(a)("workspace.create_workspace")),1)]),_:1})]),_:1},8,["href"]),e(Se,{modelValue:I.value,"onUpdate:modelValue":g[0]||(g[0]=k=>I.value=k)},null,8,["modelValue"])]),_:1}),e(de,{"with-padding":!1,class:"mt-lg"},{default:t(()=>[e(pe,null,{head:t(()=>[e(Q,null,{default:t(()=>[e(c,{component:"th",scope:"col",class:"w-10"},{default:t(()=>[e(q,{checked:s(C),"onUpdate:checked":g[1]||(g[1]=k=>A(C)?C.value=k:null),disabled:!n.$page.props.workspaces.meta.total},null,8,["checked","disabled"])]),_:1}),e(c,{component:"th",scope:"col"}),e(c,{component:"th",scope:"col"},{default:t(()=>[m(d(s(a)("general.name")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[m(d(s(a)("general.created_at")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[m(d(s(a)("user.users")),1)]),_:1}),e(c,{component:"th",scope:"col"})]),_:1})]),body:t(()=>[(l(!0),h(R,null,H(n.$page.props.workspaces.data,k=>(l(),w(De,{key:k.uuid,item:k,onOnDelete:()=>{s(v)(k.uuid)}},{checkbox:t(()=>[e(q,{checked:s(f),"onUpdate:checked":g[2]||(g[2]=K=>A(f)?f.value=K:null),value:k.uuid},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),n.$page.props.workspaces.meta.total?b("",!0):(l(),w(_e,{key:0,table:""}))]),_:1}),n.$page.props.workspaces.meta.links.length>3?(l(),h("div",Be,[e(ke,{meta:n.$page.props.workspaces.meta,links:n.$page.props.workspaces.links},null,8,["meta","links"])])):b("",!0)])])],64)}}});export{ut as default};
