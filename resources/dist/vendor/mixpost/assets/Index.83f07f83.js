import{d as F,u as L,B as A,C as M,c5 as C,ae as W,af as D,l as _,U as R,c as h,a as e,b as o,e as O,w as t,h as S,F as B,o as n,Z as z,f as d,t as u,j as Q,S as Z,i as q,R as G,g as k,aw as j,r as H,m as P,Q as J}from"./app.17a8bbe4.js";import{u as K}from"./useRouter.64f79ca8.js";import{u as X}from"./useSelectable.a2aaee50.js";import{_ as Y}from"./Admin.fc0f4e28.js";import{_ as ee}from"./PageHeader.cbe4fcaf.js";import{_ as oe}from"./Panel.1e5e6be2.js";import{_ as T}from"./Checkbox.dc42ffe0.js";import{T as te,a as se,_ as i}from"./TableCell.5981e30d.js";import{_ as re}from"./PureDangerButton.0dbbc01d.js";import{_ as ae}from"./SelectableBar.54da362b.js";import{_ as le}from"./Pagination.963a6d77.js";import{_ as ce}from"./NoResult.a422d351.js";import{T as ne}from"./Trash.0f2ffd20.js";import{_ as ie}from"./WebhookItem.c976ac46.js";import"./UserMenu.1170533d.js";import"./DropdownItem.409573e1.js";import"./Avatar.0b768219.js";import"./PencilSquare.b8b4716b.js";import"./Badge.82f1358a.js";import"./QueueList.1a33fea2.js";import"./Flex.4b1efe4e.js";import"./ChevronLeft.fe9869cf.js";import"./PureButtonLink.d6da9c4f.js";import"./DropdownButton.f5aff106.js";import"./EllipsisVertical.4969c8de.js";const me={class:"w-full mx-auto row-py"},de={class:"w-full row-px mt-lg"},ue={key:0,class:"mt-lg"},fe=F({layout:Y}),Fe=Object.assign(fe,{__name:"Index",props:{filter:{type:Object,default:{}},records:{type:Object}},setup(a){const f=a,{t:r}=L(),w=P("routePrefix"),I=P("confirmation"),{selectedRecords:m,putPageRecords:b,toggleSelectRecordsOnPage:p,deselectRecord:v,deselectAllRecords:y}=X(),{onError:N}=K(),g=A({keyword:f.filter.keyword}),x=()=>f.records.data.map(s=>s.id),U=()=>{I().title(r("webhook.delete_webhooks")).description(r("webhook.delete_webhooks_confirm")).destructive().onConfirm(s=>{$(s)}).show()},$=s=>{s.isLoading(!0),R.delete(route(`${w}.system.webhooks.deleteMultiple`),{data:{webhooks:m.value},preserveScroll:!0,onSuccess(){s.reset(),y()},onError(l){N(l,()=>{$(s)})},onFinish(){s.isLoading(!1)}})};return M(()=>{b(x()),C.on("webhookDeleted",s=>{v(s)})}),W(()=>{C.off("webhookDeleted")}),D(()=>_.exports.cloneDeep(g.value),_.exports.throttle(()=>{R.get(route("mixpost.system.webhooks.index"),_.exports.pickBy(g.value),{preserveState:!0,only:["records","filter"]})},300)),D(()=>f.records.data,()=>{b(x())}),(s,l)=>{const V=J("tooltip");return n(),h(B,null,[e(o(z),{title:o(r)("webhook.webhooks")},null,8,["title"]),O("div",me,[e(ee,{title:o(r)("webhook.webhooks")},{description:t(()=>[d(u(o(r)("webhook.webhooks_desc")),1)]),_:1},8,["title"]),O("div",de,[e(o(q),{href:s.route(`${o(w)}.system.webhooks.create`)},{default:t(()=>[e(Q,{size:"sm"},{icon:t(()=>[e(Z)]),default:t(()=>[d(" "+u(o(r)("webhook.create_webhook")),1)]),_:1})]),_:1},8,["href"]),e(ae,{count:o(m).length,onClose:o(y)},{default:t(()=>[G((n(),k(re,{onClick:U},{default:t(()=>[e(ne)]),_:1})),[[V,o(r)("general.delete")]])]),_:1},8,["count","onClose"]),e(oe,{"with-padding":!1,class:"mt-lg"},{default:t(()=>[e(te,null,{head:t(()=>[e(se,null,{default:t(()=>[e(i,{component:"th",scope:"col",class:"w-10"},{default:t(()=>[e(T,{checked:o(p),"onUpdate:checked":l[0]||(l[0]=c=>j(p)?p.value=c:null),disabled:!a.records.meta.total},null,8,["checked","disabled"])]),_:1}),e(i,{component:"th",scope:"col",class:"w-10"}),e(i,{component:"th",scope:"col"},{default:t(()=>[d(u(o(r)("general.name")),1)]),_:1}),e(i,{component:"th",scope:"col"},{default:t(()=>[d(u(o(r)("webhook.callback_url")),1)]),_:1}),e(i,{component:"th",scope:"col"},{default:t(()=>[d(u(o(r)("post.status")),1)]),_:1}),e(i,{component:"th",scope:"col"})]),_:1})]),body:t(()=>[(n(!0),h(B,null,H(a.records.data,c=>(n(),k(ie,{key:c.id,item:c,onOnDelete:()=>{o(v)(c.id)}},{checkbox:t(()=>[e(T,{checked:o(m),"onUpdate:checked":l[1]||(l[1]=E=>j(m)?m.value=E:null),value:c.id},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),a.records.meta.total?S("",!0):(n(),k(ce,{key:0,class:"py-md px-md"}))]),_:1}),a.records.meta.links.length>3?(n(),h("div",ue,[e(le,{meta:a.records.meta,links:a.records.links},null,8,["meta","links"])])):S("",!0)])])],64)}}});export{Fe as default};
