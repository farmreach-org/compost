import{cn as b,co as T,cp as F,cq as ue,cr as Se,cs as X,N as h,o as l,c,t as $,b as f,a as u,w as x,f as V,R as z,e as y,a6 as U,l as C,F as M,r as q,m as A,ct as me,I as N,Y as xe,aS as ee,h as Z,S as $e,g as j,ab as be,cu as O,H as B,a4 as ye,cv as P,ak as te,A as pe,cw as re,cx as Oe,af as ne,cy as oe,ag as Me,aB as Te,aG as Ce,ae as le,Z as Ze,bw as G}from"./app.af17fce1.js";import{u as fe}from"./useSettings.b8b0b777.js";import{a as ve,C as he}from"./ChevronLeft.bc8c49ce.js";import{p as W,C as qe}from"./ChevronDown.4d750cc2.js";import{W as ge}from"./constants.9689ba33.js";import{u as Fe,_ as ie,a as Ie}from"./VerticallyScrollableContent.56a66a02.js";import{u as Ne}from"./usePostVersions.ae0fd213.js";import{_ as je}from"./ProviderIcon.5b8afea0.js";import{_ as Pe,a as We}from"./PostsFilter.bb55c4d1.js";import{C as Ae}from"./Clock.249cd1fa.js";import"./Variable.14bfdb1f.js";import"./index.1e577897.js";import"./Panel.46137120.js";import"./EditorReadOnly.df44ca6f.js";import"./Alert.4b0fccab.js";import"./Refresh.b194524c.js";import"./SearchInput.1d1bce1a.js";import"./ArrowTopRightOnSquare.170f472d.js";import"./ColorPicker.358583bd.js";import"./Trash.ee5d54c5.js";import"./PureButtonLink.dbcc593f.js";import"./EllipsisVertical.42e3e8f4.js";import"./Checkbox.6f71d79b.js";function E(s,e){b(2,arguments);var t=T(s),a=F(e);return isNaN(a)?new Date(NaN):(a&&t.setDate(t.getDate()+a),t)}function se(s,e){b(2,arguments);var t=T(s),a=F(e);if(isNaN(a))return new Date(NaN);if(!a)return t;var n=t.getDate(),r=new Date(t.getTime());r.setMonth(t.getMonth()+a+1,0);var o=r.getDate();return n>=o?r:(t.setFullYear(r.getFullYear(),r.getMonth(),n),t)}function ae(s,e){var t,a,n,r,o,p,d,D;b(1,arguments);var g=ue(),S=F((t=(a=(n=(r=e==null?void 0:e.weekStartsOn)!==null&&r!==void 0?r:e==null||(o=e.locale)===null||o===void 0||(p=o.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&n!==void 0?n:g.weekStartsOn)!==null&&a!==void 0?a:(d=g.locale)===null||d===void 0||(D=d.options)===null||D===void 0?void 0:D.weekStartsOn)!==null&&t!==void 0?t:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var _=T(s),m=_.getDay(),w=(m<S?7:0)+m-S;return _.setDate(_.getDate()-w),_.setHours(0,0,0,0),_}var Ve=6e4;function L(s,e){b(2,arguments);var t=F(e);return Se(s,t*Ve)}function _e(s,e){b(2,arguments);var t=F(e),a=t*7;return E(s,a)}function de(s){b(1,arguments);var e=T(s);return e.setDate(1),e.setHours(0,0,0,0),e}function Be(s,e){var t,a,n,r,o,p,d,D;b(1,arguments);var g=ue(),S=F((t=(a=(n=(r=e==null?void 0:e.weekStartsOn)!==null&&r!==void 0?r:e==null||(o=e.locale)===null||o===void 0||(p=o.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&n!==void 0?n:g.weekStartsOn)!==null&&a!==void 0?a:(d=g.locale)===null||d===void 0||(D=d.options)===null||D===void 0?void 0:D.weekStartsOn)!==null&&t!==void 0?t:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var _=T(s),m=_.getDay(),w=(m<S?-7:0)+6-(m-S);return _.setDate(_.getDate()+w),_.setHours(23,59,59,999),_}function Q(s){b(1,arguments);var e=T(s),t=e.getDate();return t}function He(s){b(1,arguments);var e=T(s),t=e.getDay();return t}function Ye(s){b(1,arguments);var e=T(s),t=e.getFullYear(),a=e.getMonth(),n=new Date(0);return n.setFullYear(t,a+1,0),n.setHours(0,0,0,0),n.getDate()}function Ue(s){b(1,arguments);var e=T(s),t=e.getHours();return t}function K(s){b(1,arguments);var e=T(s),t=e.getMonth();return t}function Le(s){b(1,arguments);var e=T(s),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function J(s){return b(1,arguments),T(s).getFullYear()}function ze(s,e){b(2,arguments);var t=F(e);return E(s,-t)}function we(s,e){b(2,arguments);var t=F(e);return se(s,-t)}function Ee(s,e){b(2,arguments);var t=F(e);return _e(s,-t)}const Re={class:"text-gray-700 font-semibold text-lg"},Ge={__name:"DateIndicator",props:{selectedDate:{type:Date,required:!0}},setup(s){const e=s,{translatedFormat:t}=X(),a=h(()=>t(e.selectedDate,"MMMM yyyy"));return(n,r)=>(l(),c("div",Re,$(f(a)),1))}},Ke={class:"flex items-center"},Je={class:"flex items-center"},Qe={__name:"DateSelector",props:{currentDate:{type:[String,Date],required:!0},selectedDate:{type:Date,required:!0}},emits:["dateSelected"],setup(s,{emit:e}){const t=s,a=()=>{let o=de(we(t.selectedDate,1));e("dateSelected",o)},n=()=>{const o=typeof t.currentDate=="string"?W(t.currentDate):t.currentDate;e("dateSelected",o)},r=()=>{let o=de(se(t.selectedDate,1));e("dateSelected",o)};return(o,p)=>(l(),c("div",Ke,[u(z,{onClick:n,class:"mr-xs"},{default:x(()=>[V($(o.$t("calendar.today")),1)]),_:1}),y("div",Je,[u(U,{onClick:a,class:"mr-xs"},{default:x(()=>[u(ve)]),_:1}),u(U,{onClick:r},{default:x(()=>[u(he)]),_:1})])]))}},Xe={class:"grid grid-cols-7"},et={class:"hidden sm:block"},tt={class:"block sm:hidden"},st={__name:"Weekdays",props:{weekStartsOn:{required:!1,type:Number,default:0}},setup(s){const e=s,t=h(()=>{const a=C.exports.clone(ge);return a.splice(e.weekStartsOn?0:6).concat(a)});return(a,n)=>(l(),c("div",Xe,[(l(!0),c(M,null,q(f(t),(r,o)=>(l(),c("div",{key:o,class:"p-sm border-t border-r last:border-r-0 border-gray-200 text-center font-semibold"},[y("span",et,$(a.$t(`calendar.weekdays.${r.key}.short`)),1),y("span",tt,$(a.$t(`calendar.weekdays.${r.key}.shortest`)),1)]))),128))]))}},at={key:0,class:"flex flex-col h-full"},rt={class:"w-full h-full p-1 md:p-sm bg-white"},nt={class:"text-left text-sm md:text-base"},ot={key:0,class:"flex flex-wrap gap-xs items-center mt-xs"},lt={class:"flex items-center justify-between mt-xs"},it={class:"flex items-center text-gray-500"},dt={class:"text-sm"},ct={class:"mr-xs"},De={__name:"CalendarPostItem",props:{item:{type:Object,required:!0}},setup(s){const e=s,t=A("calendarFilter"),{timeFormat:a}=fe(),{getOriginalVersion:n,getAccountVersion:r}=Ne(),{setupURLMetaForAllVersions:o}=Fe(),p=h(()=>{if(!e.item.versions.length)return{excerpt:""};let m=e.item.accounts;t.value.accounts.length&&(m=m.filter(v=>t.value.accounts.includes(v.id)));const w=m.map(v=>{const k=r(e.item.versions,v.id);return k?k.content[0]:n(e.item.versions).content[0]});return{excerpt:(w.length?w[0]:e.item.versions[0].content[0]).excerpt}}),d=h(()=>C.exports.uniqBy(e.item.accounts,"provider")),D=h(()=>a===12?me(e.item.scheduled_at.time):e.item.scheduled_at.time),g=N(!1),S=()=>{g.value=!0,o(e.item.versions)},_=()=>{g.value=!1};return(m,w)=>{const i=xe("tooltip");return l(),c(M,null,[y("div",{class:"w-full relative flex rounded-md overflow-hidden border border-gray-200 hover:border-primary-500 transition-colors ease-in-out duration-200",onClick:S,role:"button","aria-pressed":"false",tabindex:"0"},[s.item.tags.length?(l(),c("div",at,[(l(!0),c(M,null,q(s.item.tags,v=>(l(),c("div",{class:"w-sm h-full first:rounded-tl-md last:rounded-bl-md",style:ee({backgroundColor:v.hex_color})},null,4))),256))])):Z("",!0),y("div",rt,[y("div",nt,$(f(p).excerpt),1),f(d).length?(l(),c("div",ot,[(l(!0),c(M,null,q(f(d),v=>(l(),c("div",{key:v.id},[$e(u(je,{provider:v.provider,class:"!w-4 !h-4"},null,8,["provider"]),[[i,`${v.name}`]])]))),128))])):Z("",!0),y("div",lt,[y("div",it,[u(Ae,{class:"hidden md:block mr-1 !w-5 !h-5"}),y("span",dt,$(f(D)),1)]),u(ie,{value:s.item.status,showName:!1,class:"hidden md:block"},null,8,["value"])])])]),u(be,{show:g.value,scrollableBody:!0,onClose:_},{body:x(()=>[u(ie,{value:s.item.status,class:"mb-lg"},null,8,["value"]),g.value?(l(),j(Ie,{key:0,accounts:s.item.accounts,versions:s.item.versions},null,8,["accounts","versions"])):Z("",!0)]),footer:x(()=>[g.value?(l(),c(M,{key:0},[y("div",ct,[u(Pe,{"item-id":s.item.id},null,8,["item-id"])]),u(z,{onClick:_},{default:x(()=>[V($(m.$t("general.close")),1)]),_:1})],64)):Z("",!0)]),_:1},8,["show"])],64)}}},ke="/vendor/mixpost/assets/calendar-disabled-item.e7fcf298.svg",ut={class:"absolute w-full top-0 left-0 mt-xs text-center"},mt={key:0,class:"absolute mt-xs right-0 mr-sm rtl:mr-0 rtl:ml-sm opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-300"},yt={key:1,class:"mt-xl pb-xl h-full overflow-hidden"},pt={class:"relative p-0.5 md:p-sm overflow-y-auto mixpost-scroll-style h-full"},ft={class:"flex flex-wrap space-y-xs w-full"},vt={__name:"MonthDayItem",props:{day:{type:Object,required:!0},isToday:{type:Boolean,default:!1},timeZone:{required:!1,type:String,default:"UTC"}},setup(s){const e=s,t=A("workspaceCtx"),a=h(()=>O(new Date(`${e.day.date}T00:00:00`),"d")),n=h(()=>e.day.isDisabled?{backgroundImage:`url('${ke}')`}:{}),r=()=>{const o=P.utcToZonedTime(new Date().toISOString(),e.timeZone);let p=`${e.day.date} ${O(o,"HH:mm")}`;te.visit(route("mixpost.posts.create",{workspace:t.id,schedule_at:p}))};return(o,p)=>(l(),c("div",{class:"relative min-h-[100px] overflow-hidden bg-white border-r border-b border-gray-200 group",style:ee(f(n))},[y("div",ut,[y("span",{class:B(["w-7 h-7 inline-flex items-center justify-center p-1 mr-xs rtl:mr-0 rtl:ml-xs rounded-full text-gray-700",{"bg-primary-500 text-white":s.isToday,"text-gray-400":s.day.isDisabled}])},$(f(a)),3)]),s.day.isDisabled?Z("",!0):(l(),c("div",mt,[y("button",{onClick:r,type:"button",class:"text-gray-400 hover:text-primary-500 transition-colors ease-in-out duration-200"},[u(ye)])])),s.day.posts.length?(l(),c("div",yt,[y("div",pt,[y("div",ft,[(l(!0),c(M,null,q(s.day.posts,d=>(l(),j(De,{key:d.id,item:d},null,8,["item"]))),128))])])])):Z("",!0)],4))}},ht={class:"bg-white"},gt={class:"flex flex-col md:flex-row md:items-center md:justify-between py-lg row-px"},_t={class:"flex items-center space-x-xs mb-xs md:mb-0"},wt={class:"calendar-month-height grid grid-cols-7 relative border-t border-t-gray-200"},Dt={__name:"CalendarMonth",props:{timeZone:{required:!1,type:String,default:"UTC"},initialDate:{required:!1,type:[String,Date],default:s=>O(P.utcToZonedTime(new Date().toISOString(),s.timeZone),"yyyy-MM-dd")},weekStartsOn:{required:!1,type:Number,default:0},posts:{required:!1,type:Array,default:[]}},emits:["dateSelected"],setup(s,{emit:e}){const t=s,a=N(new Date(`${t.initialDate}T00:00:00`)),n=h(()=>[...D.value,...g.value,...S.value]),r=h(()=>O(P.utcToZonedTime(new Date().toISOString(),t.timeZone),"yyyy-MM-dd")),o=h(()=>(K(a.value)+1).toString().padStart(2,"0")),p=h(()=>J(a.value)),d=h(()=>Ye(a.value)),D=h(()=>{const i=_(g.value[0].date),v=i?i-t.weekStartsOn:t.weekStartsOn?6:0,k=Q(ze(new Date(`${g.value[0].date}T00:00:00`),v)),I=we(a.value,1);return[...Array(v)].map((H,Y)=>{const R=new Date(`${J(I)}-${(K(I)+1).toString().padStart(2,"0")}-${(k+Y).toString().padStart(2,"0")}T00:00:00`);return{date:O(R,"yyyy-MM-dd"),isDisabled:re(R,t.timeZone),posts:m(R)}})}),g=h(()=>[...Array(d.value)].map((i,v)=>{const k=new Date(`${p.value}-${o.value}-${(v+1).toString().padStart(2,"0")}T00:00:00`);return{date:O(k,"yyyy-MM-dd"),isDisabled:re(k,t.timeZone),posts:m(k)}})),S=h(()=>{const i=_(Le(a.value)),v=i&&(t.weekStartsOn?7:6)-i,k=se(a.value,1);return[...Array(v)].map((I,H)=>{const Y=new Date(`${J(k)}-${(K(k)+1).toString().padStart(2,"0")}-${(H+1).toString().padStart(2,"0")}T00:00:00`);return{date:O(Y,"yyyy-MM-dd"),isDisabled:!1,posts:m(Y)}})}),_=i=>He(typeof i=="string"?new Date(`${i}T00:00:00`):i),m=i=>t.posts.filter(v=>O(i,"yyyy-MM-dd")===v.scheduled_at.date),w=i=>{a.value=i,e("dateSelected",i)};return(i,v)=>(l(),c("div",ht,[y("div",gt,[y("div",_t,[u(Qe,{"current-date":f(r),"selected-date":a.value,onDateSelected:w},null,8,["current-date","selected-date"]),u(Ge,{"selected-date":a.value},null,8,["selected-date"])]),pe(i.$slots,"header")]),u(st,{weekStartsOn:s.weekStartsOn},null,8,["weekStartsOn"]),y("div",wt,[(l(!0),c(M,null,q(f(n),k=>(l(),j(vt,{key:k.date,day:k,isToday:k.date===f(r),timeZone:s.timeZone},null,8,["day","isToday","timeZone"]))),128))])]))}},kt={class:"text-gray-700 font-semibold text-lg"},St={__name:"DateIndicator",props:{selectedDate:{type:Date,required:!0},weekStartsOn:{required:!1,type:Number,default:0}},setup(s){const e=s,{translatedFormat:t}=X(),a=h(()=>{const n=ae(e.selectedDate,{weekStartsOn:e.weekStartsOn}),r=Be(e.selectedDate,{weekStartsOn:e.weekStartsOn});return`${t(n,"MMM do")} - ${t(r,"MMM do")}`});return(n,r)=>(l(),c("div",kt,$(f(a)),1))}},xt={class:"flex items-center"},$t={class:"flex items-center"},bt={__name:"DateSelector",props:{currentDate:{type:[String,Date],required:!0},selectedDate:{type:Date,required:!0}},emits:["dateSelected"],setup(s,{emit:e}){const t=s,a=()=>{let o=Ee(t.selectedDate,1);e("dateSelected",o)},n=()=>{const o=typeof t.currentDate=="string"?W(t.currentDate):t.currentDate;e("dateSelected",o)},r=()=>{let o=_e(t.selectedDate,1);e("dateSelected",o)};return(o,p)=>(l(),c("div",xt,[u(z,{onClick:n,class:"mr-xs"},{default:x(()=>[V($(o.$t("calendar.today")),1)]),_:1}),y("div",$t,[u(U,{onClick:a,class:"mr-xs"},{default:x(()=>[u(ve)]),_:1}),u(U,{onClick:r},{default:x(()=>[u(he)]),_:1})])]))}},Ot={class:"flex flex-row sticky top-0 bg-white z-10"},Mt={class:"w-full grid grid-cols-week-time-sm md:grid-cols-week-time"},Tt=y("div",null,null,-1),Ct={class:"text-base md:text-xl"},Zt={class:"hidden sm:block"},qt={class:"block sm:hidden"},Ft={__name:"Weekdays",props:{timeZone:{required:!1,type:String,default:"UTC"},weekStartsOn:{required:!1,type:Number,default:0},selectedDate:{type:Date,required:!0},scrolled:{type:Boolean,required:!1,default:!1}},setup(s){const e=s,t=h(()=>ae(e.selectedDate,{weekStartsOn:e.weekStartsOn})),a=h(()=>Q(P.utcToZonedTime(new Date().toISOString(),e.timeZone))),n=h(()=>{const r=C.exports.clone(ge);return r.splice(e.weekStartsOn?0:6).concat(r).map((p,d)=>{const D=d===0?t.value:E(t.value,d),g=Q(D);return Object.assign(p,{date:g,isToday:a.value===g})})});return(r,o)=>(l(),c("div",Ot,[y("div",Mt,[Tt,(l(!0),c(M,null,q(f(n),(p,d)=>(l(),c("div",{key:d,class:B([{"text-primary-500":p.isToday,"border-b-gray-200":s.scrolled,"border-b-white":!s.scrolled},"p-xs border-t border-b border-l border-gray-200 text-center font-semibold"])},[y("div",Ct,$(p.date),1),y("span",{class:B({"text-gray-500":!p.isToday})},[y("span",Zt,$(r.$t(`calendar.weekdays.${p.key}.short`)),1),y("span",qt,$(r.$t(`calendar.weekdays.${p.key}.shortest`)),1)],2)],2))),128))])]))}},It={key:0,class:"absolute mt-xs right-0 mr-sm z-10 opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-300"},Nt={class:"mr-xs text-sm"},jt={class:"relative p-0.5 md:p-sm overflow-y-auto mixpost-scroll-style h-full"},Pt={class:"flex flex-wrap space-y-xs w-full"},Wt={__name:"WeekDayTimeItem",props:{dateSlot:{type:String,required:!0},timeSlot:{type:String,required:!0},minuteSlot:{type:Object,required:!0},timeZone:{required:!1,type:String,default:"UTC"},timeFormat:{required:!1,type:Number,default:12},posts:{type:Array,required:!0}},setup(s){const e=s,t=A("workspaceCtx"),{translatedFormat:a}=X(),n=h(()=>{const d=L(W(`${e.dateSlot} ${e.timeSlot}`),e.minuteSlot.end);return Oe(d,e.timeZone)}),r=h(()=>{const d=L(W(`${e.dateSlot} ${e.timeSlot}`),e.minuteSlot.start);return a(d,`${e.timeFormat===12?"h:mm aaa":"H:mm"}`)}),o=h(()=>n.value?{backgroundImage:`url('${ke}')`}:{}),p=()=>{let d=`${e.dateSlot} ${e.timeSlot}`;const D=P.utcToZonedTime(new Date().toISOString(),e.timeZone);`${O(D,"yyyy-MM-dd")} ${Ue(D)}:00`===d&&(d=O(D,"yyyy-MM-dd H:mm")),te.visit(route("mixpost.posts.create",{workspace:t.id,schedule_at:d}))};return(d,D)=>(l(),c("div",{class:"relative min-h-[50px] group",style:ee(f(o))},[f(n)?Z("",!0):(l(),c("div",It,[y("button",{onClick:p,type:"button",class:"flex items-center text-gray-400 hover:text-primary-500 transition-colors ease-in-out duration-200"},[y("span",Nt,$(f(r)),1),u(ye)])])),s.posts.length?(l(),c("div",{key:1,class:B([{"mt-lg":!f(n)},"h-full overflow-hidden"])},[y("div",jt,[y("div",Pt,[(l(!0),c(M,null,q(s.posts,g=>(l(),j(De,{key:g.id,item:g},null,8,["item"]))),128))])])],2)):Z("",!0)],4))}},At={class:"bg-white"},Vt={class:"flex flex-col md:flex-row md:items-center md:justify-between py-lg row-px"},Bt={class:"flex items-center space-x-xs mb-xs md:mb-0"},Ht={class:"w-full grid grid-cols-week-time-sm md:grid-cols-week-time"},Yt={class:"text-center text-gray-400 text-sm font-semibold"},Ut={__name:"CalendarWeek",props:{timeZone:{required:!1,type:String,default:"UTC"},initialDate:{required:!1,type:[String,Date],default:s=>O(P.utcToZonedTime(new Date().toISOString(),s.timeZone),"yyyy-MM-dd")},weekStartsOn:{required:!1,type:Number,default:0},timeFormat:{required:!1,type:Number,default:12},posts:{required:!1,type:Array,default:[]}},emits:["dateSelected"],setup(s,{emit:e}){const t=s,a=N(new Date(t.initialDate)),n=h(()=>O(P.utcToZonedTime(new Date().toISOString(),t.timeZone),"yyyy-MM-dd")),r=h(()=>ae(a.value,{weekStartsOn:t.weekStartsOn})),o=h(()=>C.exports.range(7).map(m=>{const w=m===0?r.value:E(r.value,m);return O(w,"yyyy-MM-dd")})),p=h(()=>{let m=[];for(let w=0;w<24;w++){const i=(w+":00").padStart(5,"0");m.push({12:me(i,"h aaa"),24:i})}return m}),d=[{start:0,end:59}],D=(m,w,i)=>t.posts.filter(v=>{const k=O(L(W(`${m} ${w}`),i.start),"kk:mm"),I=O(L(W(`${m} ${w}`),i.end),"kk:mm");return m===v.scheduled_at.date&&v.scheduled_at.time>=k&&v.scheduled_at.time<=I}),g=m=>{a.value=m,e("dateSelected",m)},S=N(!1),_=C.exports.throttle(m=>{S.value=m.target.scrollTop>0},100);return(m,w)=>(l(),c("div",At,[y("div",Vt,[y("div",Bt,[u(bt,{currentDate:f(n),selectedDate:a.value,onDateSelected:g},null,8,["currentDate","selectedDate"]),u(St,{selectedDate:a.value,weekStartsOn:s.weekStartsOn},null,8,["selectedDate","weekStartsOn"])]),pe(m.$slots,"header")]),y("div",{onScroll:w[0]||(w[0]=(...i)=>f(_)&&f(_)(...i)),class:"calendar-week-height-sm md:calendar-week-height-md xl:calendar-week-height overflow-y-auto"},[u(Ft,{timeZone:s.timeZone,weekStartsOn:s.weekStartsOn,selectedDate:a.value,scrolled:S.value},null,8,["timeZone","weekStartsOn","selectedDate","scrolled"]),y("div",Ht,[(l(!0),c(M,null,q(f(p),i=>(l(),c(M,null,[(l(),c(M,null,q(d,(v,k)=>(l(),c(M,null,[y("div",Yt,$(k===0?i[s.timeFormat]:""),1),(l(!0),c(M,null,q(f(o),(I,H)=>(l(),c("div",{key:H,class:B([{"!border-t-gray-100":k!==0},"grid grid-cols-1 border-l border-t border-gray-200 text-center bg-white"])},[u(Wt,{dateSlot:I,timeSlot:i[24],minuteSlot:v,timeZone:s.timeZone,timeFormat:s.timeFormat,posts:D(I,i[24],v)},null,8,["dateSlot","timeSlot","minuteSlot","timeZone","timeFormat","posts"])],2))),128))],64))),64))],64))),256))])],32)]))}},Lt={class:"inline-block mr-xs"},zt={__name:"CalendarSwitchType",setup(s){const e=A("calendarType"),t=a=>{e.value=a};return(a,n)=>(l(),j(Me,{"width-classes":"w-32",placement:"bottom"},{trigger:x(()=>[u(z,{size:"sm"},{default:x(()=>[y("span",Lt,$(f(e)==="month"?a.$t("calendar.month"):a.$t("calendar.week")),1),u(qe)]),_:1})]),content:x(()=>[u(ne,{as:"button",onClick:n[0]||(n[0]=r=>t("month"))},{icon:x(()=>[u(oe)]),default:x(()=>[V(" "+$(a.$t("calendar.month")),1)]),_:1}),u(ne,{as:"button",onClick:n[1]||(n[1]=r=>t("week"))},{icon:x(()=>[u(oe)]),default:x(()=>[V(" "+$(a.$t("calendar.week")),1)]),_:1})]),_:1}))}},Et={class:"flex items-center space-x-md rtl:space-x-reverse"},ce={__name:"CalendarToolbar",setup(s){const e=A("calendarFilter");return(t,a)=>(l(),c("div",Et,[u(zt),u(We,{modelValue:f(e),"onUpdate:modelValue":a[0]||(a[0]=n=>Te(e)?e.value=n:null)},null,8,["modelValue"])]))}},hs={__name:"Calendar",props:{posts:{required:!0,type:Object},type:{required:!0,type:String},selected_date:{required:!0,type:[String,Date]},filter:{type:Object,default:{}}},setup(s){const e=s,t=A("workspaceCtx"),{timeZone:a,timeFormat:n,weekStartsOn:r}=fe(),o=N(e.type),p=N(e.selected_date),d=N({keyword:e.filter.keyword,status:e.filter.status,tags:e.filter.tags,accounts:e.filter.accounts});G("calendarType",o),G("calendarFilter",d);const D=Ce({urlMeta:{}});G("postCtx",D);const g=h(()=>o.value==="month"),S=h(()=>o.value==="week"),_=i=>{const v=O(i,"yyyy-MM-dd");p.value=v,w(Object.assign({date:v},C.exports.pickBy(d.value)))};le(o,()=>{m(Object.assign({date:p.value,type:o.value},C.exports.pickBy(d.value)))}),le(()=>C.exports.cloneDeep(d.value),C.exports.throttle(()=>{m(Object.assign({date:p.value},C.exports.pickBy(d.value)))},300));const m=i=>{te.get(route("mixpost.calendar",Object.assign({workspace:t.id},i)),{},{preserveState:!0,only:["posts"]})},w=C.exports.throttle(i=>{m(i)},300);return(i,v)=>(l(),c(M,null,[u(f(Ze),{title:i.$t("post.schedule")},null,8,["title"]),f(g)?(l(),j(Dt,{key:0,initialDate:p.value,weekStartsOn:f(r),timeZone:f(a),posts:s.posts.data,onDateSelected:_},{header:x(()=>[u(ce)]),_:1},8,["initialDate","weekStartsOn","timeZone","posts"])):Z("",!0),f(S)?(l(),j(Ut,{key:1,initialDate:p.value,weekStartsOn:f(r),timeZone:f(a),timeFormat:f(n),posts:s.posts.data,onDateSelected:_},{header:x(()=>[u(ce)]),_:1},8,["initialDate","weekStartsOn","timeZone","timeFormat","posts"])):Z("",!0)],64))}};export{hs as default};
