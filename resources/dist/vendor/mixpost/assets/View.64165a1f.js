import{m as x,I as C,l as N,an as Y,o as w,c as V,a as t,w as e,f as r,t as l,u as P,T as B,a4 as Z,b as s,R as S,j as A,ab as D,F as U,n as L,g as b,r as G,e as h,ce as H,am as J,S as K,ag as Q,af as O,aj as I,ak as E,Y as X,d as ee,h as te,Z as se,i as R,U as ae,_ as T,aS as oe}from"./app.af17fce1.js";import{_ as le}from"./Admin.ea7882ea.js";import{_ as re}from"./PageHeader.fa50e47e.js";import{_ as j}from"./Panel.46137120.js";import{T as F}from"./Trash.ee5d54c5.js";import{_ as ne}from"./NoResult.ab0b21a6.js";import{_ as ce}from"./DropdownButton.19db68d6.js";import{a as z,_ as p,T as ie}from"./TableCell.387d3662.js";import{_ as W}from"./UserRole.b3fd8644.js";import{E as ue}from"./Eye.bfdd90d4.js";import{_ as de}from"./PureButtonLink.dbcc593f.js";import{A as me}from"./ArrowTopRightOnSquare.170f472d.js";import{_ as pe}from"./ClipboardCard.19029314.js";import"./QueueList.3a1b730e.js";import"./Flex.16a0de6f.js";import"./EllipsisVertical.42e3e8f4.js";import"./Radio.3fb0761b.js";import"./ClipboardButton.31f18455.js";import"./Clipboard.4340ad3d.js";const fe={class:"relative"},_e={__name:"SelectUser",props:{modelValue:{default:null},users:{type:Array,default:[]},exclude:{type:Array,default:[]},filter:{type:Object,default:{}}},emits:["update:modelValue"],setup(n,{emit:g}){const a=n,v=x("routePrefix"),u=C(a.users),c=(o,d)=>{!o||(d(!0),_(d,o))},_=N.exports.throttle((o,d)=>{axios.get(route(`${v}.users.resources.items`),{params:Object.assign({keyword:d,exclude:a.exclude},a.filter)}).then(f=>{o(!1),u.value=f.data.data.map(k=>({key:k.id,label:k.name}))})},350);return(o,d)=>{const f=Y("v-select");return w(),V("div",fe,[t(f,{modelValue:n.modelValue,"onUpdate:modelValue":d[0]||(d[0]=k=>o.$emit("update:modelValue",k)),options:u.value,filterable:!1,"close-on-select":!0,placeholder:o.$t("user.type_search_user"),onSearch:c},{"no-options":e(({search:k,searching:$,loading:i})=>[r(l(o.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","placeholder"])])}}},ke={__name:"AttachUser",props:{workspace:{type:Object},attachedUsers:{type:Array,default:[]}},setup(n){const g=n,{t:a}=P();x("routePrefix");const{notify:v}=L(),u=C(null),c=B({user_id:null,role:"admin"}),_=()=>{c.transform(k=>({...k,user_id:u.value.key})).post(route("mixpost.workspaces.users.store",{workspace:g.workspace.uuid}),{preserveScroll:!0,onSuccess(){f(),c.reset(),v("success",a("team.user_attached"))}})},o=C(!1),d=()=>{o.value=!0},f=()=>{o.value=!1,u.value=null};return(k,$)=>(w(),V(U,null,[t(S,{onClick:d,size:"sm"},{icon:e(()=>[t(Z)]),default:e(()=>[r(" "+l(s(a)("team.attach")),1)]),_:1}),t(D,{show:o.value,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:f},{header:e(()=>[r(l(s(a)("team.attach_user")),1)]),body:e(()=>[t(_e,{modelValue:u.value,"onUpdate:modelValue":$[0]||($[0]=i=>u.value=i),exclude:n.attachedUsers},null,8,["modelValue","exclude"]),t(W,{modelValue:s(c).role,"onUpdate:modelValue":$[1]||($[1]=i=>s(c).role=i),class:"mt-lg"},null,8,["modelValue"])]),footer:e(()=>[t(S,{onClick:f,class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[r(l(s(a)("general.cancel")),1)]),_:1}),t(A,{onClick:_,disabled:!u.value||s(c).processing,isLoading:s(c).processing},{default:e(()=>[r(l(s(a)("team.attach")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},we={class:"flex justify-start"},he={class:"capitalize"},ge={class:"flex justify-end"},ve={__name:"WorkspaceUsers",props:{workspace:{type:Object}},setup(n){const g=n,{t:a}=P(),v=x("routePrefix"),u=x("confirmation"),{notify:c}=L(),_=C(null),o=B({user_id:null,role:"admin"}),d=i=>{o.user_id=i.id,o.role=i.pivot.role,_.value=i},f=()=>{_.value=null,o.reset()},k=i=>{u().title("Detach user").description(`Are you sure you want to detach <strong>${i.name}</strong> from <strong>${g.workspace.name}</strong>?`).destructive().btnConfirmName(a("general.detach")).onConfirm(y=>{y.isLoading(!0),E.delete(route("mixpost.workspaces.users.delete",{workspace:g.workspace.uuid}),{data:{user_id:i.id},preserveScroll:!0,onSuccess(){y.reset(),c("success",a("team.user_detached"))},onFinish(){y.isLoading(!1)}})}).show()},$=()=>{o.put(route("mixpost.workspaces.users.update",{workspace:g.workspace.uuid}),{preserveScroll:!0,onSuccess(){o.reset(),f(),c("success",a("team.role_updated"))}})};return(i,y)=>{const q=X("tooltip");return w(),V(U,null,[t(j,null,{title:e(()=>[r("Users")]),action:e(()=>[t(ke,{workspace:n.workspace,attachedUsers:n.workspace.users.map(m=>m.id)},null,8,["workspace","attachedUsers"])]),default:e(()=>[n.workspace.users.length?(w(),b(ie,{key:0},{head:e(()=>[t(z,null,{default:e(()=>[t(p,{component:"th",scope:"col"}),t(p,{component:"th",scope:"col"},{default:e(()=>[r(l(s(a)("general.name")),1)]),_:1}),t(p,{component:"th",scope:"col"},{default:e(()=>[r(l(s(a)("general.email")),1)]),_:1}),t(p,{component:"th",scope:"col"},{default:e(()=>[r(l(s(a)("team.role")),1)]),_:1}),t(p,{component:"th",scope:"col"},{default:e(()=>[r(l(s(a)("team.attached_at")),1)]),_:1}),t(p,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(w(!0),V(U,null,G(s(N.exports.sortBy)(n.workspace.users,"pivot.joined_at"),m=>(w(),b(z,{key:n.workspace.id,hoverable:!0},{default:e(()=>[t(p,{align:"left"},{default:e(()=>[h("div",we,[t(H,{name:m.name},null,8,["name"])])]),_:2},1024),t(p,null,{default:e(()=>[r(l(m.name),1)]),_:2},1024),t(p,null,{default:e(()=>[r(l(m.email),1)]),_:2},1024),t(p,null,{default:e(()=>[t(J,null,{default:e(()=>[h("span",he,l(m.pivot.role),1)]),_:2},1024)]),_:2},1024),t(p,null,{default:e(()=>[r(l(m.pivot.joined_at),1)]),_:2},1024),t(p,{align:"right"},{default:e(()=>[h("div",ge,[K((w(),b(de,{href:i.route(`${s(v)}.users.view`,{user:m.id}),class:"mr-xs"},{default:e(()=>[t(ue)]),_:2},1032,["href"])),[[q,s(a)("general.view")]]),t(Q,{"width-classes":"w-32",placement:"bottom-end"},{trigger:e(()=>[t(ce)]),content:e(()=>[t(O,{onClick:M=>d(m),as:"button"},{icon:e(()=>[t(I)]),default:e(()=>[r(" "+l(s(a)("team.edit_role")),1)]),_:2},1032,["onClick"]),t(O,{onClick:M=>k(m),as:"button"},{icon:e(()=>[t(F,{class:"text-red-500"})]),default:e(()=>[r(" "+l(s(a)("general.detach")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(w(),b(ne,{key:1}))]),_:1}),t(D,{show:_.value!==null,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:f},{header:e(()=>[r(l(s(a)("team.edit_role_for"))+" ",1),h("strong",null,l(_.value.name),1)]),body:e(()=>[t(W,{modelValue:s(o).role,"onUpdate:modelValue":y[0]||(y[0]=m=>s(o).role=m),class:"mt-lg"},null,8,["modelValue"])]),footer:e(()=>[t(S,{onClick:f,class:"mr-xs"},{default:e(()=>[r(l(s(a)("general.cancel")),1)]),_:1}),t(A,{onClick:$,disabled:s(o).processing,isLoading:s(o).processing},{default:e(()=>[r(l(s(a)("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64)}}},$e={class:"w-full mx-auto row-py"},ye={class:"flex items-center"},xe={class:"row-px"},be={class:"mt-lg"},Ve=ee({layout:le}),Me=Object.assign(Ve,{__name:"View",props:{workspace:{type:Object}},setup(n){const g=n,{t:a}=P(),v=x("routePrefix"),u=x("confirmation"),{notify:c}=L(),_=()=>{u().title(a("workspace.delete_workspace")).description(a("workspace.confirm_delete_workspace")).destructive().onConfirm(o=>{o.isLoading(!0),E.delete(route(`${v}.workspaces.delete`,{workspace:g.workspace.uuid}),{onSuccess(){c("success",a("workspace.workspace_deleted"))}})}).show()};return(o,d)=>(w(),V(U,null,[t(s(se),{title:s(a)("workspace.view_workspace")},null,8,["title"]),h("div",$e,[t(re,{title:s(a)("workspace.view_workspace")},{description:e(()=>[r(l(n.workspace.name),1)]),default:e(()=>[h("div",ye,[t(s(R),{href:o.route("mixpost.switchWorkspace",{workspace:n.workspace.uuid,redirect:!0}),method:"post",as:"button",type:"button",class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[t(S,{size:"sm"},{icon:e(()=>[t(me)]),default:e(()=>[r(" "+l(s(a)("general.open")),1)]),_:1})]),_:1},8,["href"]),t(s(R),{href:o.route(`${s(v)}.workspaces.edit`,{workspace:n.workspace.uuid}),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[t(A,{size:"sm"},{icon:e(()=>[t(I)]),default:e(()=>[r(" "+l(s(a)("general.edit")),1)]),_:1})]),_:1},8,["href"]),t(ae,{onClick:_,size:"sm"},{icon:e(()=>[t(F)]),_:1})])]),_:1},8,["title"]),h("div",xe,[t(j,null,{title:e(()=>[r(l(s(a)("general.details")),1)]),default:e(()=>[t(T,null,{title:e(()=>[r(l(s(a)("general.name")),1)]),default:e(()=>[h("div",null,l(n.workspace.name),1)]),_:1}),t(T,{class:"mt-lg"},{title:e(()=>[r(l(s(a)("general.color")),1)]),default:e(()=>[h("div",{style:oe({background:n.workspace.hex_color}),class:"w-xl h-xl rounded-md"},null,4)]),_:1})]),_:1}),h("div",be,[t(ve,{workspace:n.workspace},null,8,["workspace"])]),o.$page.props.mixpost.features.api_access_tokens?(w(),b(j,{key:0,class:"mt-lg"},{title:e(()=>[r(l(s(a)("system.usage_api")),1)]),default:e(()=>[t(pe,null,{default:e(()=>[r(l(n.workspace.uuid),1)]),_:1})]),_:1})):te("",!0)])])],64))}});export{Me as default};
