import{u as T,m as P,B as M,Q as E,o as f,c as S,e as p,R as G,b as a,g as v,w as e,a as t,f as l,t as o,U as K,c5 as O,n as j,y as X,O as Y,T as ee,N as q,a2 as x,a0 as L,h as Q,ab as D,ac as te,F as U,d as ae,C as se,ae as le,af as oe,Z as re,i as ne,j as ie,aw as N,r as ue}from"./app.17a8bbe4.js";import{_ as de}from"./Admin.fc0f4e28.js";import{u as ce}from"./useSelectable.a2aaee50.js";import{_ as me}from"./PageHeader.cbe4fcaf.js";import{_ as _e}from"./PureDangerButton.0dbbc01d.js";import{_ as fe}from"./Panel.1e5e6be2.js";import{_ as R}from"./Checkbox.dc42ffe0.js";import{_,a as Z,T as pe}from"./TableCell.5981e30d.js";import{_ as ge}from"./SelectableBar.54da362b.js";import{_ as he}from"./NoResult.a422d351.js";import{T as z}from"./Trash.0f2ffd20.js";import{P as $e}from"./PencilSquare.b8b4716b.js";import{_ as A,a as be}from"./DropdownItem.409573e1.js";import{_ as ve}from"./DropdownButton.f5aff106.js";import{_ as ye}from"./PureButtonLink.d6da9c4f.js";import{A as ke}from"./ArrowTopRightOnSquare.98b36170.js";import{_ as B}from"./Badge.82f1358a.js";import{_ as w}from"./VerticalGroup.a25bdb43.js";import{_ as I}from"./LabelSuffix.fd9b98d2.js";import{_ as F}from"./SuccessButton.fd48eeff.js";import{_ as xe}from"./UploadButton.bd8f57a9.js";import{_ as we}from"./Flex.4b1efe4e.js";import"./UserMenu.1170533d.js";import"./Avatar.0b768219.js";import"./QueueList.1a33fea2.js";import"./EllipsisVertical.4969c8de.js";const Pe={class:"flex flex-row items-center justify-end gap-xs"},Se={__name:"PageItemAction",props:{itemId:{type:String,required:!0},urlPath:{type:String,required:!0}},emits:["onDelete"],setup(i,{emit:r}){const n=i,{t:c}=T(),h=P("routePrefix"),b=P("confirmation"),{notify:k}=j(),g=M(!1),s=()=>{b().title(c("page.delete_pages")).description(c("page.confirm_delete_pages")).destructive().onConfirm(m=>{m.isLoading(!0),K.delete(route(`${h}.pages.delete`,{page:n.itemId}),{onSuccess(){g.value=!1,k("success",c("page.page_deleted")),r("onDelete"),O.emit("pageDelete",n.itemId),m.reset()},onFinish(){m.close()}})}).show()};return(m,C)=>{const u=E("tooltip");return f(),S("div",null,[p("div",Pe,[G((f(),v(ye,{href:m.route(`${a(h)}.pages.show`,{slug:i.urlPath}),native:!0,target:"_blank"},{default:e(()=>[t(ke)]),_:1},8,["href"])),[[u,a(c)("general.open")]]),t(be,{"width-classes":"w-32",placement:"bottom-end"},{trigger:e(()=>[t(ve)]),content:e(()=>[t(A,{href:m.route(`${a(h)}.pages.edit`,{page:i.itemId})},{icon:e(()=>[t($e)]),default:e(()=>[l(" "+o(a(c)("general.edit")),1)]),_:1},8,["href"]),t(A,{onClick:s,as:"button"},{icon:e(()=>[t(z,{class:"text-red-500"})]),default:e(()=>[l(" "+o(a(c)("general.delete")),1)]),_:1})]),_:1})])])}}},Ce={__name:"PageItem",props:{item:{type:Object,required:!0}},setup(i){return(r,n)=>(f(),v(Z,{hoverable:!0},{default:e(()=>[t(_,{class:"w-10"},{default:e(()=>[X(r.$slots,"checkbox")]),_:3}),t(_,null,{default:e(()=>[l(o(i.item.name),1)]),_:1}),t(_,null,{default:e(()=>[l(o(i.item.slug),1)]),_:1}),t(_,null,{default:e(()=>[i.item.status?(f(),v(B,{key:0,variant:"success"},{default:e(()=>[l(o(r.$t("general.enabled")),1)]),_:1})):(f(),v(B,{key:1,variant:"error"},{default:e(()=>[l(o(r.$t("general.disabled")),1)]),_:1}))]),_:1}),t(_,null,{default:e(()=>[l(o(i.item.created_at),1)]),_:1}),t(_,null,{default:e(()=>[t(Se,{itemId:i.item.uuid,urlPath:i.item.url_path},null,8,["itemId","urlPath"])]),_:1})]),_:3}))}},Ve={for:"brand_name"},De=["src"],Ie={for:"brand_name"},Oe={for:"email"},Ue={for:"register_url"},Re={class:"ml-xs"},Te={__name:"GeneratePageSamples",setup(i){const{t:r}=T(),n=P("routePrefix"),c=M(!1),h=()=>{c.value=!0},b=()=>{c.value=!1},{user:k}=Y(),{notify:g}=j(),s=ee({logo_url:q().props.mixpost.theme.logo,brand_name:q().props.app.name,email:k.value.email,register_url:"",destroy:!1}),m=()=>{s.post(route(`${n}.pages.generateSamples`),{preserveScroll:!0,onSuccess(){g("success",r("page.sample_pages_generated")),b(),s.reset()}})};return(C,u)=>(f(),S(U,null,[t(F,{onClick:h},{default:e(()=>[l(o(a(r)("page.generate_samples")),1)]),_:1}),t(te,{show:c.value,"max-width":"sm",closeable:!0,"scrollable-body":!0,onClose:b},{header:e(()=>[l(o(a(r)("page.generate_page_samples")),1)]),body:e(()=>[t(w,null,{title:e(()=>[p("label",Ve,[l(o(a(r)("page.brand_logo"))+" ",1),t(I,{danger:!0},{default:e(()=>[l("*")]),_:1})])]),footer:e(()=>[t(x,{message:a(s).errors.logo_url},null,8,["message"])]),default:e(()=>[p("div",null,[t(xe,{withPreload:!0,onUpload:u[0]||(u[0]=d=>{if(d.is_local_driver){a(s).logo_url=`/storage/${d.path}`;return}a(s).logo_url=d.url})},{default:e(()=>[t(L,null,{default:e(()=>[l(o(a(r)("general.upload")),1)]),_:1})]),_:1}),a(s).logo_url?(f(),S("img",{key:0,src:a(s).logo_url,class:"w-auto max-h-20 mt-xs",alt:"Logo"},null,8,De)):Q("",!0)])]),_:1}),t(w,{class:"mt-lg"},{title:e(()=>[p("label",Ie,[l(o(a(r)("page.brand_name"))+" ",1),t(I,{danger:!0},{default:e(()=>[l("*")]),_:1})])]),footer:e(()=>[t(x,{message:a(s).errors.brand_name},null,8,["message"])]),default:e(()=>[t(D,{type:"text",modelValue:a(s).brand_name,"onUpdate:modelValue":u[1]||(u[1]=d=>a(s).brand_name=d),error:a(s).errors.brand_name,id:"brand_name"},null,8,["modelValue","error"])]),_:1}),t(w,{class:"mt-lg"},{title:e(()=>[p("label",Oe,[l(o(a(r)("page.contact_email"))+" ",1),t(I,{danger:!0},{default:e(()=>[l("*")]),_:1})])]),footer:e(()=>[t(x,{message:a(s).errors.email},null,8,["message"])]),default:e(()=>[t(D,{type:"text",modelValue:a(s).email,"onUpdate:modelValue":u[2]||(u[2]=d=>a(s).email=d),error:a(s).errors.email,id:"email"},null,8,["modelValue","error"])]),_:1}),t(w,{class:"mt-lg"},{title:e(()=>[p("label",Ue,o(a(r)("page.register_url")),1)]),footer:e(()=>[t(x,{message:a(s).errors.register_url},null,8,["message"])]),default:e(()=>[t(D,{type:"text",modelValue:a(s).register_url,"onUpdate:modelValue":u[3]||(u[3]=d=>a(s).register_url=d),error:a(s).errors.register_url,id:"register_url"},null,8,["modelValue","error"])]),_:1}),t(w,{class:"mt-lg"},{footer:e(()=>[t(x,{message:a(s).errors.destroy},null,8,["message"])]),default:e(()=>[p("label",null,[t(R,{checked:a(s).destroy,"onUpdate:checked":u[4]||(u[4]=d=>a(s).destroy=d),value:!1},null,8,["checked"]),p("span",Re,o(a(r)("page.destroy_existing_pages")),1)])]),_:1})]),footer:e(()=>[t(L,{onClick:b,class:"mr-xs"},{default:e(()=>[l(o(a(r)("general.cancel")),1)]),_:1}),t(F,{onClick:m,disabled:a(s).processing,isLoading:a(s).processing},{default:e(()=>[l(o(a(r)("page.generate")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},je={class:"w-full mx-auto row-py"},qe={class:"mt-lg row-px w-full"},Le=ae({layout:de}),dt=Object.assign(Le,{__name:"Pages",props:{pages:{type:Object}},setup(i){const r=i,{t:n}=T(),c=P("routePrefix"),h=n("page.pages"),{notify:b}=j(),k=P("confirmation"),{selectedRecords:g,putPageRecords:s,toggleSelectRecordsOnPage:m,deselectRecord:C,deselectAllRecords:u}=ce(),d=()=>r.pages.data.map($=>$.uuid);se(()=>{s(d()),O.on("pageDelete",$=>{C($)})}),le(()=>{O.off("pageDelete")}),oe(()=>r.pages.data,()=>{s(d())});const H=()=>{k().title(n("page.delete_pages")).description(n("page.confirm_delete_pages")).destructive().onConfirm($=>{$.isLoading(!0),K.delete(route(`${c}.pages.deleteMultiple`),{data:{pages:g.value},preserveScroll:!0,onSuccess(){u(),b("success",n("page.pages_deleted"))},onFinish(){$.reset()}})}).show()};return($,V)=>{const J=E("tooltip");return f(),S(U,null,[t(a(re),{title:a(h)},null,8,["title"]),p("div",je,[t(me,{title:a(h)},{description:e(()=>[l(o(a(n)("page.page_desc")),1)]),default:e(()=>[t(Te)]),_:1},8,["title"]),p("div",qe,[t(ge,{count:a(g).length,onClose:a(u)},{default:e(()=>[G((f(),v(_e,{onClick:H},{default:e(()=>[t(z)]),_:1})),[[J,a(n)("general.delete")]])]),_:1},8,["count","onClose"]),t(we,null,{default:e(()=>[t(a(ne),{href:$.route(`${a(c)}.pages.create`),class:"mb-xs sm:mb-0"},{default:e(()=>[t(ie,null,{default:e(()=>[l(o(a(n)("page.create_page")),1)]),_:1})]),_:1},8,["href"])]),_:1}),t(fe,{"with-padding":!1,class:"mt-lg"},{default:e(()=>[t(pe,null,{head:e(()=>[t(Z,null,{default:e(()=>[t(_,{component:"th",scope:"col",class:"w-10"},{default:e(()=>[t(R,{checked:a(m),"onUpdate:checked":V[0]||(V[0]=y=>N(m)?m.value=y:null),disabled:!i.pages.data.length},null,8,["checked","disabled"])]),_:1}),t(_,{component:"th",scope:"col"},{default:e(()=>[l(o(a(n)("general.name")),1)]),_:1}),t(_,{component:"th",scope:"col"},{default:e(()=>[l(o(a(n)("page.url_path")),1)]),_:1}),t(_,{component:"th",scope:"col"},{default:e(()=>[l(o(a(n)("general.status")),1)]),_:1}),t(_,{component:"th",scope:"col"},{default:e(()=>[l(o(a(n)("general.created_at")),1)]),_:1}),t(_,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(f(!0),S(U,null,ue(i.pages.data,y=>(f(),v(Ce,{key:y.uuid,item:y,onOnDelete:()=>{a(C)(y.uuid)}},{checkbox:e(()=>[t(R,{checked:a(g),"onUpdate:checked":V[1]||(V[1]=W=>N(g)?g.value=W:null),value:y.uuid},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),i.pages.data.length?Q("",!0):(f(),v(he,{key:0,class:"p-md"},{default:e(()=>[l(o(a(n)("page.no_pages_found")),1)]),_:1}))]),_:1})])])],64)}}});export{dt as default};
