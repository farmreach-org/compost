import{m as x,B as C,l as B,aj as Q,o as w,c as V,a as t,w as e,f as r,t as l,u as P,T as N,S as Z,b as s,a0 as S,j as A,ac as D,F as U,n as L,g as b,r as G,e as h,R as H,U as E,Q as J,d as K,h as X,Z as Y,i as O,a1 as ee,_ as R,$ as te}from"./app.17a8bbe4.js";import{_ as se}from"./Admin.fc0f4e28.js";import{_ as oe}from"./PageHeader.cbe4fcaf.js";import{_ as j}from"./Panel.1e5e6be2.js";import{_ as ae}from"./Badge.82f1358a.js";import{a as le,_ as T}from"./DropdownItem.409573e1.js";import{P as F}from"./PencilSquare.b8b4716b.js";import{T as I}from"./Trash.0f2ffd20.js";import{_ as re}from"./NoResult.a422d351.js";import{_ as ne}from"./DropdownButton.f5aff106.js";import{a as z,_ as p,T as ce}from"./TableCell.5981e30d.js";import{_ as ie}from"./Avatar.0b768219.js";import{_ as W}from"./UserRole.bb67af2b.js";import{E as ue}from"./Eye.e20c1588.js";import{_ as de}from"./PureButtonLink.d6da9c4f.js";import{A as me}from"./ArrowTopRightOnSquare.98b36170.js";import{_ as pe}from"./ClipboardCard.102f2585.js";import"./UserMenu.1170533d.js";import"./QueueList.1a33fea2.js";import"./Flex.4b1efe4e.js";import"./EllipsisVertical.4969c8de.js";import"./Radio.8545682f.js";import"./ClipboardButton.27a81395.js";import"./Clipboard.44086a3d.js";const fe={class:"relative"},_e={__name:"SelectUser",props:{modelValue:{default:null},users:{type:Array,default:[]},exclude:{type:Array,default:[]},filter:{type:Object,default:{}}},emits:["update:modelValue"],setup(n,{emit:g}){const o=n,v=x("routePrefix"),u=C(o.users),c=(a,d)=>{!a||(d(!0),_(d,a))},_=B.exports.throttle((a,d)=>{axios.get(route(`${v}.users.resources.items`),{params:Object.assign({keyword:d,exclude:o.exclude},o.filter)}).then(f=>{a(!1),u.value=f.data.data.map(k=>({key:k.id,label:k.name}))})},350);return(a,d)=>{const f=Q("v-select");return w(),V("div",fe,[t(f,{modelValue:n.modelValue,"onUpdate:modelValue":d[0]||(d[0]=k=>a.$emit("update:modelValue",k)),options:u.value,filterable:!1,"close-on-select":!0,placeholder:a.$t("user.type_search_user"),onSearch:c},{"no-options":e(({search:k,searching:$,loading:i})=>[r(l(a.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","placeholder"])])}}},ke={__name:"AttachUser",props:{workspace:{type:Object},attachedUsers:{type:Array,default:[]}},setup(n){const g=n,{t:o}=P();x("routePrefix");const{notify:v}=L(),u=C(null),c=N({user_id:null,role:"admin"}),_=()=>{c.transform(k=>({...k,user_id:u.value.key})).post(route("mixpost.workspaces.users.store",{workspace:g.workspace.uuid}),{preserveScroll:!0,onSuccess(){f(),c.reset(),v("success",o("team.user_attached"))}})},a=C(!1),d=()=>{a.value=!0},f=()=>{a.value=!1,u.value=null};return(k,$)=>(w(),V(U,null,[t(S,{onClick:d,size:"sm"},{icon:e(()=>[t(Z)]),default:e(()=>[r(" "+l(s(o)("team.attach")),1)]),_:1}),t(D,{show:a.value,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:f},{header:e(()=>[r(l(s(o)("team.attach_user")),1)]),body:e(()=>[t(_e,{modelValue:u.value,"onUpdate:modelValue":$[0]||($[0]=i=>u.value=i),exclude:n.attachedUsers},null,8,["modelValue","exclude"]),t(W,{modelValue:s(c).role,"onUpdate:modelValue":$[1]||($[1]=i=>s(c).role=i),class:"mt-lg"},null,8,["modelValue"])]),footer:e(()=>[t(S,{onClick:f,class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[r(l(s(o)("general.cancel")),1)]),_:1}),t(A,{onClick:_,disabled:!u.value||s(c).processing,isLoading:s(c).processing},{default:e(()=>[r(l(s(o)("team.attach")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},we={class:"flex justify-start"},he={class:"capitalize"},ge={class:"flex justify-end"},ve={__name:"WorkspaceUsers",props:{workspace:{type:Object}},setup(n){const g=n,{t:o}=P(),v=x("routePrefix"),u=x("confirmation"),{notify:c}=L(),_=C(null),a=N({user_id:null,role:"admin"}),d=i=>{a.user_id=i.id,a.role=i.pivot.role,_.value=i},f=()=>{_.value=null,a.reset()},k=i=>{u().title("Detach user").description(`Are you sure you want to detach <strong>${i.name}</strong> from <strong>${g.workspace.name}</strong>?`).destructive().btnConfirmName(o("general.detach")).onConfirm(y=>{y.isLoading(!0),E.delete(route("mixpost.workspaces.users.delete",{workspace:g.workspace.uuid}),{data:{user_id:i.id},preserveScroll:!0,onSuccess(){y.reset(),c("success",o("team.user_detached"))},onFinish(){y.isLoading(!1)}})}).show()},$=()=>{a.put(route("mixpost.workspaces.users.update",{workspace:g.workspace.uuid}),{preserveScroll:!0,onSuccess(){a.reset(),f(),c("success",o("team.role_updated"))}})};return(i,y)=>{const q=J("tooltip");return w(),V(U,null,[t(j,null,{title:e(()=>[r("Users")]),action:e(()=>[t(ke,{workspace:n.workspace,attachedUsers:n.workspace.users.map(m=>m.id)},null,8,["workspace","attachedUsers"])]),default:e(()=>[n.workspace.users.length?(w(),b(ce,{key:0},{head:e(()=>[t(z,null,{default:e(()=>[t(p,{component:"th",scope:"col"}),t(p,{component:"th",scope:"col"},{default:e(()=>[r(l(s(o)("general.name")),1)]),_:1}),t(p,{component:"th",scope:"col"},{default:e(()=>[r(l(s(o)("general.email")),1)]),_:1}),t(p,{component:"th",scope:"col"},{default:e(()=>[r(l(s(o)("team.role")),1)]),_:1}),t(p,{component:"th",scope:"col"},{default:e(()=>[r(l(s(o)("team.attached_at")),1)]),_:1}),t(p,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(w(!0),V(U,null,G(s(B.exports.sortBy)(n.workspace.users,"pivot.joined_at"),m=>(w(),b(z,{key:n.workspace.id,hoverable:!0},{default:e(()=>[t(p,{align:"left"},{default:e(()=>[h("div",we,[t(ie,{name:m.name},null,8,["name"])])]),_:2},1024),t(p,null,{default:e(()=>[r(l(m.name),1)]),_:2},1024),t(p,null,{default:e(()=>[r(l(m.email),1)]),_:2},1024),t(p,null,{default:e(()=>[t(ae,null,{default:e(()=>[h("span",he,l(m.pivot.role),1)]),_:2},1024)]),_:2},1024),t(p,null,{default:e(()=>[r(l(m.pivot.joined_at),1)]),_:2},1024),t(p,{align:"right"},{default:e(()=>[h("div",ge,[H((w(),b(de,{href:i.route(`${s(v)}.users.view`,{user:m.id}),class:"mr-xs"},{default:e(()=>[t(ue)]),_:2},1032,["href"])),[[q,s(o)("general.view")]]),t(le,{"width-classes":"w-32",placement:"bottom-end"},{trigger:e(()=>[t(ne)]),content:e(()=>[t(T,{onClick:M=>d(m),as:"button"},{icon:e(()=>[t(F)]),default:e(()=>[r(" "+l(s(o)("team.edit_role")),1)]),_:2},1032,["onClick"]),t(T,{onClick:M=>k(m),as:"button"},{icon:e(()=>[t(I,{class:"text-red-500"})]),default:e(()=>[r(" "+l(s(o)("general.detach")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(w(),b(re,{key:1}))]),_:1}),t(D,{show:_.value!==null,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:f},{header:e(()=>[r(l(s(o)("team.edit_role_for"))+" ",1),h("strong",null,l(_.value.name),1)]),body:e(()=>[t(W,{modelValue:s(a).role,"onUpdate:modelValue":y[0]||(y[0]=m=>s(a).role=m),class:"mt-lg"},null,8,["modelValue"])]),footer:e(()=>[t(S,{onClick:f,class:"mr-xs"},{default:e(()=>[r(l(s(o)("general.cancel")),1)]),_:1}),t(A,{onClick:$,disabled:s(a).processing,isLoading:s(a).processing},{default:e(()=>[r(l(s(o)("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64)}}},$e={class:"w-full mx-auto row-py"},ye={class:"flex items-center"},xe={class:"row-px"},be={class:"mt-lg"},Ve=K({layout:se}),Je=Object.assign(Ve,{__name:"View",props:{workspace:{type:Object}},setup(n){const g=n,{t:o}=P(),v=x("routePrefix"),u=x("confirmation"),{notify:c}=L(),_=()=>{u().title(o("workspace.delete_workspace")).description(o("workspace.confirm_delete_workspace")).destructive().onConfirm(a=>{a.isLoading(!0),E.delete(route(`${v}.workspaces.delete`,{workspace:g.workspace.uuid}),{onSuccess(){c("success",o("workspace.workspace_deleted"))}})}).show()};return(a,d)=>(w(),V(U,null,[t(s(Y),{title:s(o)("workspace.view_workspace")},null,8,["title"]),h("div",$e,[t(oe,{title:s(o)("workspace.view_workspace")},{description:e(()=>[r(l(n.workspace.name),1)]),default:e(()=>[h("div",ye,[t(s(O),{href:a.route("mixpost.switchWorkspace",{workspace:n.workspace.uuid,redirect:!0}),method:"post",as:"button",type:"button",class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[t(S,{size:"sm"},{icon:e(()=>[t(me)]),default:e(()=>[r(" "+l(s(o)("general.open")),1)]),_:1})]),_:1},8,["href"]),t(s(O),{href:a.route(`${s(v)}.workspaces.edit`,{workspace:n.workspace.uuid}),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[t(A,{size:"sm"},{icon:e(()=>[t(F)]),default:e(()=>[r(" "+l(s(o)("general.edit")),1)]),_:1})]),_:1},8,["href"]),t(ee,{onClick:_,size:"sm"},{icon:e(()=>[t(I)]),_:1})])]),_:1},8,["title"]),h("div",xe,[t(j,null,{title:e(()=>[r(l(s(o)("general.details")),1)]),default:e(()=>[t(R,null,{title:e(()=>[r(l(s(o)("general.name")),1)]),default:e(()=>[h("div",null,l(n.workspace.name),1)]),_:1}),t(R,{class:"mt-lg"},{title:e(()=>[r(l(s(o)("general.color")),1)]),default:e(()=>[h("div",{style:te({background:n.workspace.hex_color}),class:"w-xl h-xl rounded-md"},null,4)]),_:1})]),_:1}),h("div",be,[t(ve,{workspace:n.workspace},null,8,["workspace"])]),a.$page.props.mixpost.features.api_access_tokens?(w(),b(j,{key:0,class:"mt-lg"},{title:e(()=>[r(l(s(o)("system.usage_api")),1)]),default:e(()=>[t(pe,null,{default:e(()=>[r(l(n.workspace.uuid),1)]),_:1})]),_:1})):X("",!0)])])],64))}});export{Je as default};
