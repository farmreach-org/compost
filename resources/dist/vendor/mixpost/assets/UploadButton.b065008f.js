import{m as y,I as l,o as r,c as v,e as i,A as k,g as B,$ as w,h as x,a0 as c,n as P}from"./app.af17fce1.js";const j=["accept"],$={__name:"UploadButton",props:{withPreloader:{type:Boolean,default:!0}},emits:["upload"],setup(u,{emit:f}){const p=y("routePrefix"),{notify:d}=P(),a=l(null),o=l(!1),s=["image/jpg","image/jpeg","image/gif","image/png"],m=t=>Array.from(t).filter(e=>s.includes(e.type)),g=()=>{a.value.click()},_=t=>{const e=new FormData;e.append("file",t),c.start(),o.value=!0,axios.post(route(`${p}.files.upload`),e).then(function(n){f("upload",n.data)}).catch(function(n){d("error",n.response.data.message)}).finally(()=>{c.done(),o.value=!1})},h=t=>{const e=m(t.target.files);e.length&&(a.value.value=null,_(e[0]))};return(t,e)=>(r(),v("div",null,[i("div",{onClick:g,role:"button",class:"inline-flex relative"},[k(t.$slots,"default"),u.withPreloader&&o.value?(r(),B(w,{key:0,opacity:75})):x("",!0)]),i("input",{ref_key:"input",ref:a,type:"file",accept:s.join(","),class:"hidden",onChange:h},null,40,j)]))}};export{$ as _};
