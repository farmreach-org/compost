import{u as x,m as k,a5 as E,I as j,Y as g,o as w,c as A,e as I,S,b as u,g as y,w as t,a as e,af as p,aj as B,f as m,t as l,ag as O,ak as T,cb as V,A as W,am as $}from"./app.af17fce1.js";import{_ as c,a as q}from"./TableCell.387d3662.js";import{u as L}from"./useRouter.79115767.js";import{_ as N}from"./PureButtonLink.dbcc593f.js";import{T as P}from"./Trash.ee5d54c5.js";import{_ as Q}from"./DropdownButton.19db68d6.js";import{Q as U}from"./QueueList.3a1b730e.js";const F={class:"flex flex-row items-center justify-end gap-xs"},Y={__name:"WebhookItemAction",props:{itemId:{type:String,required:!0}},emits:["onDelete"],setup(s,{emit:d}){const o=s,{t:i}=x(),a=k("routePrefix"),f=k("confirmation"),n=k("workspaceCtx");E();const{onError:_}=L(),h=r=>{switch(r){case"edit":return n?route(`${a}.webhooks.edit`,{workspace:n.id,webhook:o.itemId}):route(`${a}.system.webhooks.edit`,{webhook:o.itemId});case"deliveries":return n?route(`${a}.webhooks.deliveries.index`,{workspace:n.id,webhook:o.itemId}):route(`${a}.system.webhooks.deliveries.index`,{webhook:o.itemId});case"delete":return n?route(`${a}.webhooks.delete`,{workspace:n.id,webhook:o.itemId}):route(`${a}.system.webhooks.delete`,{webhook:o.itemId});default:return""}},C=j(!1),D=()=>{f().title(i("webhook.delete_webhook")).description(i("webhook.delete_webhook_confirm")).destructive().onConfirm(r=>{b(r)}).show()},b=r=>{r.isLoading(!0),T.delete(h("delete"),{onSuccess(){C.value=!1,d("onDelete"),V.emit("webhookDeleted",o.itemId),r.reset()},onError(v){_(v,()=>{b(r)})},onFinish(){r.isLoading(!1)}})};return(r,v)=>{const R=g("tooltip");return w(),A("div",null,[I("div",F,[S((w(),y(N,{href:h("deliveries")},{default:t(()=>[e(U)]),_:1},8,["href"])),[[R,u(i)("webhook.deliveries")]]),e(O,{"width-classes":"w-36",placement:"bottom-end"},{trigger:t(()=>[e(Q)]),content:t(()=>[e(p,{href:h("edit")},{icon:t(()=>[e(B)]),default:t(()=>[m(" "+l(u(i)("general.edit")),1)]),_:1},8,["href"]),e(p,{onClick:D,as:"button"},{icon:t(()=>[e(P,{class:"text-red-500"})]),default:t(()=>[m(" "+l(u(i)("general.delete")),1)]),_:1})]),_:1})])])}}},z={class:"text-gray-500"},ee={__name:"WebhookItem",props:{item:{type:Object,required:!0}},setup(s){const d=s,{t:o}=x(),i=()=>{switch(d.item.last_delivery_status){case"SUCCESS":return"success";case"ERROR":return"error";default:return"neutral"}},a=()=>{switch(d.item.last_delivery_status){case"SUCCESS":return o("webhook.last_delivery_succeeded");case"ERROR":return o("webhook.last_delivery_failed");default:return o("webhook.never_triggered")}};return(f,n)=>{const _=g("tooltip");return w(),y(q,{hoverable:!0},{default:t(()=>[e(c,{class:"w-10"},{default:t(()=>[W(f.$slots,"checkbox")]),_:3}),e(c,null,{default:t(()=>[S(e($,{variant:i(),class:"w-5 h-5 !rounded-full"},null,8,["variant"]),[[_,a()]])]),_:1}),e(c,null,{default:t(()=>[m(l(s.item.name),1)]),_:1}),e(c,null,{default:t(()=>[I("span",z,l(`${s.item.callback_url.slice(0,60)}`)+l(s.item.callback_url.length>60?"...":""),1)]),_:1}),e(c,null,{default:t(()=>[e($,{variant:s.item.active?"success":"error"},{default:t(()=>[m(l(s.item.active?u(o)("general.active"):u(o)("general.inactive")),1)]),_:1},8,["variant"])]),_:1}),e(c,null,{default:t(()=>[e(Y,{itemId:s.item.id},null,8,["itemId"])]),_:1})]),_:3})}}};export{ee as _};
