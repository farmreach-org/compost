import{E as ee}from"./VariableManager.499eef94.js";import{_ as B}from"./Flex.4b1efe4e.js";import{p as A,o as l,c as v,e as f,u as te,B as b,H as V,cy as ae,af as oe,a as o,c4 as I,b as p,ab as ne,w as a,F as D,r as se,g as k,I as ie,t as r,f as h,h as w,k as E,a3 as le,Q as F,R as G,a0 as C,j as q,y as re,A as K,X as de,a8 as me,m as N,c8 as U,C as ce,ac as ue}from"./app.17a8bbe4.js";import{_ as pe,L as fe}from"./ListItem.7833f353.js";import{_ as ve}from"./NoResult.a422d351.js";import{u as H}from"./useAPIForm.c7e5f88a.js";import{_ as _e}from"./Select.86391e44.js";import{_ as $e}from"./Textarea.21a485eb.js";import{_ as T}from"./VerticalGroup.a25bdb43.js";import{R as ge}from"./Refresh.b96d0217.js";import{_ as he}from"./ClipboardButton.27a81395.js";import{u as ye}from"./Variable.97fafecd.js";import"./index.92d9ef89.js";import"./index.63dd7c22.js";import"./vue.runtime.esm-bundler.586834b3.js";import"./DropdownItem.409573e1.js";import"./MediaGifs.7235e76d.js";import"./index.browser.89e24408.js";import"./Masonry.f60a1546.js";import"./MediaFile.b8493171.js";import"./ExclamationCircle.dd1367ec.js";import"./SectionTitle.06d0ffc9.js";import"./SearchInput.1ad6cb85.js";import"./Alert.43894852.js";import"./Tab.46ca3863.js";import"./EllipsisVertical.4969c8de.js";import"./Trash.0f2ffd20.js";import"./PencilSquare.b8b4716b.js";import"./Badge.82f1358a.js";import"./Clipboard.44086a3d.js";const be={},ke={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},xe=f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"},null,-1),we=[xe];function Ce(s,t){return l(),v("svg",ke,we)}const j=A(be,[["render",Ce]]),Le={},ze={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Se=f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"},null,-1),Be=[Se];function je(s,t){return l(),v("svg",ze,Be)}const Z=A(Le,[["render",je]]),Me={},De={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Ie=f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"},null,-1),Ne=[Ie];function Ve(s,t){return l(),v("svg",De,Ne)}const Q=A(Me,[["render",Ve]]),Ee=["onKeydown"],Ae={class:"mt-xs"},Pe={key:1,class:"mr-[8px]"},Re={__name:"Spotlight",emits:["selected-command"],setup(s,{emit:t}){const{t:e}=te(),d=[{name:"rephrase",nameLocalized:e("ai.rephrase"),icon:"Sparkles"},{name:"fix_spelling_grammar",nameLocalized:e("ai.fix_spelling_grammar"),icon:"Sparkles"},{name:"expand",nameLocalized:e("ai.expand"),icon:"PlusSimple"},{name:"shorten",nameLocalized:e("ai.shorten"),icon:"Minus"},{name:"simplify",nameLocalized:e("ai.simplify"),icon:"Sparkles"},{name:"friendly_tone",nameLocalized:e("ai.friendly_tone"),icon:"",emoji:"\u{1F60A}"},{name:"formal_tone",nameLocalized:e("ai.formal_tone"),icon:"",emoji:"\u{1F3A9}"},{name:"edgy_tone",nameLocalized:e("ai.edgy_tone"),icon:"",emoji:"\u{1F918}"},{name:"engaging_tone",nameLocalized:e("ai.engaging_tone"),icon:"",emoji:"\u{1F91D}"},{name:"generate",nameLocalized:e("general.generate_new"),icon:"Sparkles"}],n=b(""),_=b("improve"),$=b(0),y={Sparkles:j,PlusSimple:Z,Minus:Q},m=V(()=>d.filter(u=>ae(u.name).toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),L=u=>{_.value=u.name,t("selected-command",_.value)},x=u=>{u.key==="ArrowDown"||u.key==="Tab"?$.value<m.value.length-1?$.value++:$.value=0:u.key==="ArrowUp"&&($.value>0?$.value--:$.value=m.value.length-1),_.value=m.value[$.value].name};return oe(n,()=>{m.value.length>0&&(_.value=m.value[0].name)}),(u,c)=>(l(),v("div",{onKeydown:[I(E(x,["prevent"]),["up"]),I(E(x,["prevent"]),["down"]),I(E(x,["prevent"]),["tab"])]},[f("div",Ae,[o(ne,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=g=>n.value=g),onKeydown:c[1]||(c[1]=I(g=>u.$emit("selected-command",_.value),["enter"])),type:"text",autofocus:"",placeholder:p(e)("general.search_jump"),class:"w-full"},null,8,["modelValue","placeholder"])]),o(fe,{class:"mt-xs"},{default:a(()=>[(l(!0),v(D,null,se(p(m),g=>(l(),k(pe,{onClick:M=>L(g),active:_.value===g.name,tabindex:"0",role:"button"},{default:a(()=>[o(B,null,{default:a(()=>[g.icon?(l(),k(ie(y[g.icon]),{key:0,class:"text-stone-800"})):(l(),v("div",Pe,r(g.emoji),1)),h(" "+r(g.nameLocalized),1)]),_:2},1024)]),_:2},1032,["onClick","active"]))),256)),p(m).length?w("",!0):(l(),k(ve,{key:0,class:"p-md"}))]),_:1})],40,Ee))}},Te={class:"relative h-10 mt-lg"},X={__name:"Preloader",setup(s){return(t,e)=>(l(),v("div",Te,[o(le,null,{default:a(()=>[h(r(t.$t("ai.is_writing")),1)]),_:1})]))}},Fe={class:"p-md rounded-md border border-primary-500"},J={__name:"GeneratedContent",props:{text:{type:String,required:!0},buttonsDisabled:{type:Boolean,default:!1},insertButtonName:{type:String,default:""}},emits:["clickInsert","clickRetry"],setup(s){const t=b("");return(e,d)=>{const n=F("tooltip");return l(),v("div",Fe,[f("p",{ref_key:"dom",ref:t},r(s.text),513),o(B,{class:"mt-md justify-between items-center"},{default:a(()=>[G(o(he,{htmlElm:t.value,"show-text":!1,size:"xs",disabled:s.buttonsDisabled,component:"PureButton"},null,8,["htmlElm","disabled"]),[[n,e.$t("system.copy")]]),o(B,null,{default:a(()=>[o(C,{onClick:d[0]||(d[0]=_=>e.$emit("clickRetry")),size:"xs",disabled:s.buttonsDisabled},{icon:a(()=>[o(ge)]),default:a(()=>[h(" "+r(e.$t("general.retry")),1)]),_:1},8,["disabled"]),o(q,{onClick:d[1]||(d[1]=_=>e.$emit("clickInsert")),size:"sm",disabled:s.buttonsDisabled},{default:a(()=>[h(r(s.insertButtonName?s.insertButtonName:e.$t("general.insert")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})])}}},Ge={role:"button",class:"flex justify-between p-sm border border-stone-600 hover:border-stone-700 transition ease-in-out duration-200 w-full rounded-md"},O={__name:"DraftContent",props:{clearable:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1}},emits:["clickClear"],setup(s){return(t,e)=>(l(),v("div",Ge,[f("div",{class:K({"overflow-hidden text-ellipsis truncate":!s.expanded})},[re(t.$slots,"default")],2),s.clearable?(l(),k(me,{key:0,onClick:e[0]||(e[0]=d=>t.$emit("clickClear"))},{default:a(()=>[o(de)]),_:1})):w("",!0)]))}},qe=f("div",{class:"text-lg"},"\u{1F60A}",-1),Ke=f("div",{class:"text-lg"},"\u{1F3A9}",-1),Ue=f("div",{class:"text-lg"},"\u{1F918}",-1),He=f("div",{class:"text-lg"},"\u{1F91D}",-1),W={__name:"Commands",props:{disabled:{type:Boolean,default:!1}},emits:["selected-command"],setup(s){return(t,e)=>(l(),k(B,{wrap:!0,class:"justify-end"},{default:a(()=>[o(C,{onClick:e[0]||(e[0]=d=>t.$emit("selected-command","rephrase")),disabled:s.disabled,size:"xs"},{icon:a(()=>[o(j)]),default:a(()=>[h(" "+r(t.$t("ai.rephrase")),1)]),_:1},8,["disabled"]),o(C,{onClick:e[1]||(e[1]=d=>t.$emit("selected-command","expand")),disabled:s.disabled,size:"xs"},{icon:a(()=>[o(Z)]),default:a(()=>[h(" "+r(t.$t("ai.expand")),1)]),_:1},8,["disabled"]),o(C,{onClick:e[2]||(e[2]=d=>t.$emit("selected-command","shorten")),disabled:s.disabled,size:"xs"},{icon:a(()=>[o(Q)]),default:a(()=>[h(" "+r(t.$t("ai.shorten")),1)]),_:1},8,["disabled"]),o(C,{onClick:e[3]||(e[3]=d=>t.$emit("selected-command","simplify")),disabled:s.disabled,size:"xs"},{icon:a(()=>[o(j)]),default:a(()=>[h(" "+r(t.$t("ai.simplify")),1)]),_:1},8,["disabled"]),o(C,{onClick:e[4]||(e[4]=d=>t.$emit("selected-command","friendly_tone")),disabled:s.disabled,size:"xs"},{icon:a(()=>[qe]),default:a(()=>[h(" "+r(t.$t("ai.more_friendly")),1)]),_:1},8,["disabled"]),o(C,{onClick:e[5]||(e[5]=d=>t.$emit("selected-command","formal_tone")),disabled:s.disabled,size:"xs"},{icon:a(()=>[Ke]),default:a(()=>[h(" "+r(t.$t("ai.more_formal")),1)]),_:1},8,["disabled"]),o(C,{onClick:e[6]||(e[6]=d=>t.$emit("selected-command","edgy_tone")),disabled:s.disabled,size:"xs"},{icon:a(()=>[Ue]),default:a(()=>[h(" "+r(t.$t("ai.more_edgy")),1)]),_:1},8,["disabled"]),o(C,{onClick:e[7]||(e[7]=d=>t.$emit("selected-command","engaging_tone")),disabled:s.disabled,size:"xs"},{icon:a(()=>[He]),default:a(()=>[h(" "+r(t.$t("ai.more_engaging")),1)]),_:1},8,["disabled"])]),_:1}))}},Ze={for:"prompt"},Qe={for:"tone"},Xe={value:"neutral"},Je={value:"friendly"},Oe={value:"formal"},We={value:"edgy"},Ye={value:"engaging"},et={key:0},tt={key:1},at={__name:"TextGenerator",props:{characterLimit:{type:Number,default:1e3}},emits:["insert"],setup(s){const t=s,e=N("routePrefix"),d=N("workspaceCtx"),n=H({prompt:"",tone:"neutral",character_limit:t.characterLimit===0||t.characterLimit>1e3?1e3:t.characterLimit,text:"",command:""}),_=b("form"),$=b(!1),y=b(!1),m=b(""),L=V(()=>_.value==="form"),x=i=>{_.value=i},u=()=>{x("form"),y.value=!0},c=()=>{x("result"),y.value=!1},g=()=>{n.reset(),u(),$.value=!1,y.value=!1,m.value=""},{onCatch:M}=U(),P=()=>{c(),n.transform(i=>({prompt:i.prompt,tone:i.tone,character_limit:i.character_limit})).post(route(`${e}.ai.text.generate`,{workspace:d.id}),{onSuccess(i){m.value=i.text,$.value=!0},onError(i){M(i)}})},R=()=>{c(),n.transform(i=>({text:i.text,command:i.command,character_limit:i.character_limit>1e3?1e3:i.character_limit})).post(route(`${e}.ai.text.modify`,{workspace:d.id}),{onSuccess(i){m.value=i.text},onError(i){M(i)}})},Y=()=>{if(!n.command){P();return}R()};return(i,z)=>(l(),v(D,null,[p(L)?(l(),v(D,{key:0},[o(T,null,{title:a(()=>[f("label",Ze,r(i.$t("ai.tell_ai")),1)]),default:a(()=>[o($e,{modelValue:p(n).prompt,"onUpdate:modelValue":z[0]||(z[0]=S=>p(n).prompt=S),id:"prompt",rows:"4",autofocus:"",placeholder:i.$t("ai.write_about")},null,8,["modelValue","placeholder"])]),_:1}),o(T,{class:"mt-lg"},{title:a(()=>[f("label",Qe,r(i.$t("ai.tone_")),1)]),default:a(()=>[o(_e,{modelValue:p(n).tone,"onUpdate:modelValue":z[1]||(z[1]=S=>p(n).tone=S),id:"tone"},{default:a(()=>[f("option",Xe,r(i.$t("ai.tone.neutral")),1),f("option",Je,"\u{1F60A} "+r(i.$t("ai.tone.friendly")),1),f("option",Oe,"\u{1F3A9} "+r(i.$t("ai.tone.formal")),1),f("option",We,"\u{1F918} "+r(i.$t("ai.tone.edgy")),1),f("option",Ye,"\u{1F91D} "+r(i.$t("ai.tone.engaging")),1)]),_:1},8,["modelValue"])]),_:1}),o(B,{class:"mt-lg justify-end"},{default:a(()=>[$.value?(l(),k(C,{key:0,onClick:c},{default:a(()=>[h(r(i.$t("general.cancel")),1)]),_:1})):w("",!0),o(q,{onClick:P,size:"md",isLoading:p(n).processing,disabled:p(n).processing||!p(n).prompt},{icon:a(()=>[o(j)]),default:a(()=>[y.value?(l(),v("span",tt,r(i.$t("general.generate_new")),1)):(l(),v("span",et,r(i.$t("general.generate")),1))]),_:1},8,["isLoading","disabled"])]),_:1})],64)):w("",!0),p(L)?w("",!0):(l(),k(O,{key:1,onClick:u,onClickClear:g,clearable:!p(n).processing,class:"mt-xs"},{default:a(()=>[h(r(p(n).prompt),1)]),_:1},8,["clearable"])),p(n).processing?(l(),k(X,{key:2})):w("",!0),$.value&&!p(n).processing?(l(),v(D,{key:3},[o(J,{onClickInsert:z[2]||(z[2]=S=>i.$emit("insert",m.value)),onClickRetry:Y,text:m.value,buttonsDisabled:y.value,insertButtonName:"Insert",class:K(["mt-lg",{"opacity-50":y.value}])},null,8,["text","buttonsDisabled","class"]),o(W,{onSelectedCommand:z[3]||(z[3]=S=>{p(n).command=S,p(n).text=m.value,R()}),disabled:y.value,class:"mt-lg"},null,8,["disabled"])],64)):w("",!0)],64))}},ot={class:"font-medium"},nt={key:1,class:"mt-lg"},st={class:"font-medium"},it={__name:"TextModifier",props:{text:{type:String,required:!0},command:{type:String,required:!0},characterLimit:{type:Number,default:1e3}},emits:["replace"],setup(s){const t=s,e=N("routePrefix"),d=N("workspaceCtx"),n=H({text:t.text,command:t.command,character_limit:t.characterLimit===0||t.characterLimit>1e3?1e3:t.characterLimit}),{getTextFromHtmlString:_}=ye(),$=V(()=>_(t.text)),y=b(!1),m=b(""),{onCatch:L}=U();ce(()=>{x()});const x=()=>{n.post(route(`${e}.ai.text.modify`,{workspace:d.id}),{onSuccess(u){m.value=u.text},onError(u){L(u)}})};return(u,c)=>(l(),v(D,null,[f("div",null,[f("div",ot,r(u.$t("ai.draft_content")),1),o(O,{onClick:c[0]||(c[0]=g=>y.value=!y.value),expanded:y.value,class:"mt-xs"},{default:a(()=>[h(r(p($)),1)]),_:1},8,["expanded"])]),p(n).processing?(l(),k(X,{key:0})):w("",!0),m.value&&!p(n).processing?(l(),v("div",nt,[f("div",st,r(u.$t("ai.generated_content")),1),o(J,{onClickInsert:c[1]||(c[1]=g=>u.$emit("replace",m.value)),onClickRetry:x,text:m.value,insertButtonName:u.$t("general.replace"),class:"mt-xs"},null,8,["text","insertButtonName"]),o(W,{onSelectedCommand:c[2]||(c[2]=g=>{p(n).command=g,p(n).text=m.value,x()}),class:"mt-lg"})])):w("",!0)],64))}},At={__name:"AIAssist",props:{text:{type:String,required:!0},characterLimit:{type:Number,default:1e3}},emits:["insert","replace","close"],setup(s,{emit:t}){const e=s,d=b(!1),n=b("spotlight"),_=b(""),$=V(()=>e.text===""||e.text==="<div></div>"),y=()=>{$.value&&(n.value="generator"),d.value=!0},m=()=>{d.value=!1,n.value="spotlight"},L=c=>{if(c!=="generate"){n.value="modifier",_.value=c;return}n.value="generator"},x=c=>{t("insert",c),m()},u=c=>{t("replace",c),m()};return(c,g)=>{const M=F("tooltip");return l(),v("div",null,[G((l(),k(ee,{onClick:y},{default:a(()=>[o(j)]),_:1})),[[M,"AI Assist"]]),o(ue,{show:d.value,onClose:m,"max-width":"md",closeable:!0,"scrollable-body":!0},{header:a(()=>[o(B,{class:"items-center"},{default:a(()=>[o(j,{class:"text-stone-800"}),h(" "+r(c.$t("ai.ai_assist")),1)]),_:1})]),body:a(()=>[n.value==="spotlight"?(l(),k(Re,{key:0,onSelectedCommand:L})):w("",!0),n.value==="generator"?(l(),k(at,{key:1,onInsert:x,characterLimit:s.characterLimit},null,8,["characterLimit"])):w("",!0),n.value==="modifier"?(l(),k(it,{key:2,onReplace:u,text:s.text,characterLimit:s.characterLimit,command:_.value},null,8,["text","characterLimit","command"])):w("",!0)]),_:1},8,["show"])])}}};export{At as default};
