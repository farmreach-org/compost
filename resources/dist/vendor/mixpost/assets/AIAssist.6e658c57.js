import{E as ee}from"./VariableManager.b3ee3513.js";import{_ as B}from"./Flex.16a0de6f.js";import{p as A,o as l,c as v,e as f,u as te,I as k,N as V,cI as ae,ae as ne,a as n,ca as N,b as p,aa as oe,w as a,F as M,r as se,g as y,O as ie,t as r,f as h,h as w,k as E,$ as le,Y as F,S as G,R as C,j as q,A as re,H as K,X as de,a6 as me,m as D,cf as U,J as ce,ab as ue}from"./app.af17fce1.js";import{_ as pe,L as fe}from"./ListItem.f6ce595c.js";import{_ as ve}from"./NoResult.ab0b21a6.js";import{u as H}from"./useAPIForm.69afd2ef.js";import{_ as _e}from"./Select.fb5ef007.js";import{_ as $e}from"./Textarea.6ba3949b.js";import{_ as T}from"./VerticalGroup.52259a52.js";import{R as ge}from"./Refresh.b194524c.js";import{_ as he}from"./ClipboardButton.31f18455.js";import{u as be}from"./Variable.14bfdb1f.js";import"./index.1e577897.js";import"./index.67c8fd0f.js";import"./vue.runtime.esm-bundler.e6f20297.js";import"./MediaGifs.04f762c3.js";import"./index.browser.89e24408.js";import"./Masonry.89e32a10.js";import"./MediaFile.bd3acf0a.js";import"./ExclamationCircle.2dc7440a.js";import"./SectionTitle.1b751bda.js";import"./SearchInput.1d1bce1a.js";import"./Alert.4b0fccab.js";import"./Tab.319f1bf2.js";import"./EllipsisVertical.42e3e8f4.js";import"./Trash.ee5d54c5.js";import"./Clipboard.4340ad3d.js";const ke={},ye={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},xe=f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"},null,-1),we=[xe];function Ce(s,t){return l(),v("svg",ye,we)}const j=A(ke,[["render",Ce]]),Le={},Se={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},ze=f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"},null,-1),Be=[ze];function je(s,t){return l(),v("svg",Se,Be)}const Z=A(Le,[["render",je]]),Ie={},Me={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Ne=f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"},null,-1),De=[Ne];function Ve(s,t){return l(),v("svg",Me,De)}const J=A(Ie,[["render",Ve]]),Ee=["onKeydown"],Ae={class:"mt-xs"},Pe={key:1,class:"mr-[8px]"},Re={__name:"Spotlight",emits:["selected-command"],setup(s,{emit:t}){const{t:e}=te(),d=[{name:"rephrase",nameLocalized:e("ai.rephrase"),icon:"Sparkles"},{name:"fix_spelling_grammar",nameLocalized:e("ai.fix_spelling_grammar"),icon:"Sparkles"},{name:"expand",nameLocalized:e("ai.expand"),icon:"PlusSimple"},{name:"shorten",nameLocalized:e("ai.shorten"),icon:"Minus"},{name:"simplify",nameLocalized:e("ai.simplify"),icon:"Sparkles"},{name:"friendly_tone",nameLocalized:e("ai.friendly_tone"),icon:"",emoji:"\u{1F60A}"},{name:"formal_tone",nameLocalized:e("ai.formal_tone"),icon:"",emoji:"\u{1F3A9}"},{name:"edgy_tone",nameLocalized:e("ai.edgy_tone"),icon:"",emoji:"\u{1F918}"},{name:"engaging_tone",nameLocalized:e("ai.engaging_tone"),icon:"",emoji:"\u{1F91D}"},{name:"generate",nameLocalized:e("general.generate_new"),icon:"Sparkles"}],o=k(""),_=k("improve"),$=k(0),b={Sparkles:j,PlusSimple:Z,Minus:J},m=V(()=>d.filter(u=>ae(u.name).toLocaleLowerCase().includes(o.value.toLocaleLowerCase()))),L=u=>{_.value=u.name,t("selected-command",_.value)},x=u=>{u.key==="ArrowDown"||u.key==="Tab"?$.value<m.value.length-1?$.value++:$.value=0:u.key==="ArrowUp"&&($.value>0?$.value--:$.value=m.value.length-1),_.value=m.value[$.value].name};return ne(o,()=>{m.value.length>0&&(_.value=m.value[0].name)}),(u,c)=>(l(),v("div",{onKeydown:[N(E(x,["prevent"]),["up"]),N(E(x,["prevent"]),["down"]),N(E(x,["prevent"]),["tab"])]},[f("div",Ae,[n(oe,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=g=>o.value=g),onKeydown:c[1]||(c[1]=N(g=>u.$emit("selected-command",_.value),["enter"])),type:"text",autofocus:"",placeholder:p(e)("general.search_jump"),class:"w-full"},null,8,["modelValue","placeholder"])]),n(fe,{class:"mt-xs"},{default:a(()=>[(l(!0),v(M,null,se(p(m),g=>(l(),y(pe,{onClick:I=>L(g),active:_.value===g.name,tabindex:"0",role:"button"},{default:a(()=>[n(B,null,{default:a(()=>[g.icon?(l(),y(ie(b[g.icon]),{key:0,class:"text-stone-800"})):(l(),v("div",Pe,r(g.emoji),1)),h(" "+r(g.nameLocalized),1)]),_:2},1024)]),_:2},1032,["onClick","active"]))),256)),p(m).length?w("",!0):(l(),y(ve,{key:0,class:"p-md"}))]),_:1})],40,Ee))}},Te={class:"relative h-10 mt-lg"},O={__name:"Preloader",setup(s){return(t,e)=>(l(),v("div",Te,[n(le,null,{default:a(()=>[h(r(t.$t("ai.is_writing")),1)]),_:1})]))}},Fe={class:"p-md rounded-md border border-primary-500"},X={__name:"GeneratedContent",props:{text:{type:String,required:!0},buttonsDisabled:{type:Boolean,default:!1},insertButtonName:{type:String,default:""}},emits:["clickInsert","clickRetry"],setup(s){const t=k("");return(e,d)=>{const o=F("tooltip");return l(),v("div",Fe,[f("p",{ref_key:"dom",ref:t},r(s.text),513),n(B,{class:"mt-md justify-between items-center"},{default:a(()=>[G(n(he,{htmlElm:t.value,"show-text":!1,size:"xs",disabled:s.buttonsDisabled,component:"PureButton"},null,8,["htmlElm","disabled"]),[[o,e.$t("system.copy")]]),n(B,null,{default:a(()=>[n(C,{onClick:d[0]||(d[0]=_=>e.$emit("clickRetry")),size:"xs",disabled:s.buttonsDisabled},{icon:a(()=>[n(ge)]),default:a(()=>[h(" "+r(e.$t("general.retry")),1)]),_:1},8,["disabled"]),n(q,{onClick:d[1]||(d[1]=_=>e.$emit("clickInsert")),size:"sm",disabled:s.buttonsDisabled},{default:a(()=>[h(r(s.insertButtonName?s.insertButtonName:e.$t("general.insert")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})])}}},Ge={role:"button",class:"flex justify-between p-sm border border-stone-600 hover:border-stone-700 transition ease-in-out duration-200 w-full rounded-md"},Y={__name:"DraftContent",props:{clearable:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1}},emits:["clickClear"],setup(s){return(t,e)=>(l(),v("div",Ge,[f("div",{class:K({"overflow-hidden text-ellipsis truncate":!s.expanded})},[re(t.$slots,"default")],2),s.clearable?(l(),y(me,{key:0,onClick:e[0]||(e[0]=d=>t.$emit("clickClear"))},{default:a(()=>[n(de)]),_:1})):w("",!0)]))}},qe=f("div",{class:"text-lg"},"\u{1F60A}",-1),Ke=f("div",{class:"text-lg"},"\u{1F3A9}",-1),Ue=f("div",{class:"text-lg"},"\u{1F918}",-1),He=f("div",{class:"text-lg"},"\u{1F91D}",-1),Q={__name:"Commands",props:{disabled:{type:Boolean,default:!1}},emits:["selected-command"],setup(s){return(t,e)=>(l(),y(B,{wrap:!0,class:"justify-end"},{default:a(()=>[n(C,{onClick:e[0]||(e[0]=d=>t.$emit("selected-command","rephrase")),disabled:s.disabled,size:"xs"},{icon:a(()=>[n(j)]),default:a(()=>[h(" "+r(t.$t("ai.rephrase")),1)]),_:1},8,["disabled"]),n(C,{onClick:e[1]||(e[1]=d=>t.$emit("selected-command","expand")),disabled:s.disabled,size:"xs"},{icon:a(()=>[n(Z)]),default:a(()=>[h(" "+r(t.$t("ai.expand")),1)]),_:1},8,["disabled"]),n(C,{onClick:e[2]||(e[2]=d=>t.$emit("selected-command","shorten")),disabled:s.disabled,size:"xs"},{icon:a(()=>[n(J)]),default:a(()=>[h(" "+r(t.$t("ai.shorten")),1)]),_:1},8,["disabled"]),n(C,{onClick:e[3]||(e[3]=d=>t.$emit("selected-command","simplify")),disabled:s.disabled,size:"xs"},{icon:a(()=>[n(j)]),default:a(()=>[h(" "+r(t.$t("ai.simplify")),1)]),_:1},8,["disabled"]),n(C,{onClick:e[4]||(e[4]=d=>t.$emit("selected-command","friendly_tone")),disabled:s.disabled,size:"xs"},{icon:a(()=>[qe]),default:a(()=>[h(" "+r(t.$t("ai.more_friendly")),1)]),_:1},8,["disabled"]),n(C,{onClick:e[5]||(e[5]=d=>t.$emit("selected-command","formal_tone")),disabled:s.disabled,size:"xs"},{icon:a(()=>[Ke]),default:a(()=>[h(" "+r(t.$t("ai.more_formal")),1)]),_:1},8,["disabled"]),n(C,{onClick:e[6]||(e[6]=d=>t.$emit("selected-command","edgy_tone")),disabled:s.disabled,size:"xs"},{icon:a(()=>[Ue]),default:a(()=>[h(" "+r(t.$t("ai.more_edgy")),1)]),_:1},8,["disabled"]),n(C,{onClick:e[7]||(e[7]=d=>t.$emit("selected-command","engaging_tone")),disabled:s.disabled,size:"xs"},{icon:a(()=>[He]),default:a(()=>[h(" "+r(t.$t("ai.more_engaging")),1)]),_:1},8,["disabled"])]),_:1}))}},Ze={for:"prompt"},Je={for:"tone"},Oe={value:"neutral"},Xe={value:"friendly"},Ye={value:"formal"},Qe={value:"edgy"},We={value:"engaging"},et={key:0},tt={key:1},at={__name:"TextGenerator",props:{characterLimit:{type:Number,default:1e3}},emits:["insert"],setup(s){const t=s,e=D("routePrefix"),d=D("workspaceCtx"),o=H({prompt:"",tone:"neutral",character_limit:t.characterLimit===0||t.characterLimit>1e3?1e3:t.characterLimit,text:"",command:""}),_=k("form"),$=k(!1),b=k(!1),m=k(""),L=V(()=>_.value==="form"),x=i=>{_.value=i},u=()=>{x("form"),b.value=!0},c=()=>{x("result"),b.value=!1},g=()=>{o.reset(),u(),$.value=!1,b.value=!1,m.value=""},{onCatch:I}=U(),P=()=>{c(),o.transform(i=>({prompt:i.prompt,tone:i.tone,character_limit:i.character_limit})).post(route(`${e}.ai.text.generate`,{workspace:d.id}),{onSuccess(i){m.value=i.text,$.value=!0},onError(i){I(i)}})},R=()=>{c(),o.transform(i=>({text:i.text,command:i.command,character_limit:i.character_limit>1e3?1e3:i.character_limit})).post(route(`${e}.ai.text.modify`,{workspace:d.id}),{onSuccess(i){m.value=i.text},onError(i){I(i)}})},W=()=>{if(!o.command){P();return}R()};return(i,S)=>(l(),v(M,null,[p(L)?(l(),v(M,{key:0},[n(T,null,{title:a(()=>[f("label",Ze,r(i.$t("ai.tell_ai")),1)]),default:a(()=>[n($e,{modelValue:p(o).prompt,"onUpdate:modelValue":S[0]||(S[0]=z=>p(o).prompt=z),id:"prompt",rows:"4",autofocus:"",placeholder:i.$t("ai.write_about")},null,8,["modelValue","placeholder"])]),_:1}),n(T,{class:"mt-lg"},{title:a(()=>[f("label",Je,r(i.$t("ai.tone_")),1)]),default:a(()=>[n(_e,{modelValue:p(o).tone,"onUpdate:modelValue":S[1]||(S[1]=z=>p(o).tone=z),id:"tone"},{default:a(()=>[f("option",Oe,r(i.$t("ai.tone.neutral")),1),f("option",Xe,"\u{1F60A} "+r(i.$t("ai.tone.friendly")),1),f("option",Ye,"\u{1F3A9} "+r(i.$t("ai.tone.formal")),1),f("option",Qe,"\u{1F918} "+r(i.$t("ai.tone.edgy")),1),f("option",We,"\u{1F91D} "+r(i.$t("ai.tone.engaging")),1)]),_:1},8,["modelValue"])]),_:1}),n(B,{class:"mt-lg justify-end"},{default:a(()=>[$.value?(l(),y(C,{key:0,onClick:c},{default:a(()=>[h(r(i.$t("general.cancel")),1)]),_:1})):w("",!0),n(q,{onClick:P,size:"md",isLoading:p(o).processing,disabled:p(o).processing||!p(o).prompt},{icon:a(()=>[n(j)]),default:a(()=>[b.value?(l(),v("span",tt,r(i.$t("general.generate_new")),1)):(l(),v("span",et,r(i.$t("general.generate")),1))]),_:1},8,["isLoading","disabled"])]),_:1})],64)):w("",!0),p(L)?w("",!0):(l(),y(Y,{key:1,onClick:u,onClickClear:g,clearable:!p(o).processing,class:"mt-xs"},{default:a(()=>[h(r(p(o).prompt),1)]),_:1},8,["clearable"])),p(o).processing?(l(),y(O,{key:2})):w("",!0),$.value&&!p(o).processing?(l(),v(M,{key:3},[n(X,{onClickInsert:S[2]||(S[2]=z=>i.$emit("insert",m.value)),onClickRetry:W,text:m.value,buttonsDisabled:b.value,insertButtonName:"Insert",class:K(["mt-lg",{"opacity-50":b.value}])},null,8,["text","buttonsDisabled","class"]),n(Q,{onSelectedCommand:S[3]||(S[3]=z=>{p(o).command=z,p(o).text=m.value,R()}),disabled:b.value,class:"mt-lg"},null,8,["disabled"])],64)):w("",!0)],64))}},nt={class:"font-medium"},ot={key:1,class:"mt-lg"},st={class:"font-medium"},it={__name:"TextModifier",props:{text:{type:String,required:!0},command:{type:String,required:!0},characterLimit:{type:Number,default:1e3}},emits:["replace"],setup(s){const t=s,e=D("routePrefix"),d=D("workspaceCtx"),o=H({text:t.text,command:t.command,character_limit:t.characterLimit===0||t.characterLimit>1e3?1e3:t.characterLimit}),{getTextFromHtmlString:_}=be(),$=V(()=>_(t.text)),b=k(!1),m=k(""),{onCatch:L}=U();ce(()=>{x()});const x=()=>{o.post(route(`${e}.ai.text.modify`,{workspace:d.id}),{onSuccess(u){m.value=u.text},onError(u){L(u)}})};return(u,c)=>(l(),v(M,null,[f("div",null,[f("div",nt,r(u.$t("ai.draft_content")),1),n(Y,{onClick:c[0]||(c[0]=g=>b.value=!b.value),expanded:b.value,class:"mt-xs"},{default:a(()=>[h(r(p($)),1)]),_:1},8,["expanded"])]),p(o).processing?(l(),y(O,{key:0})):w("",!0),m.value&&!p(o).processing?(l(),v("div",ot,[f("div",st,r(u.$t("ai.generated_content")),1),n(X,{onClickInsert:c[1]||(c[1]=g=>u.$emit("replace",m.value)),onClickRetry:x,text:m.value,insertButtonName:u.$t("general.replace"),class:"mt-xs"},null,8,["text","insertButtonName"]),n(Q,{onSelectedCommand:c[2]||(c[2]=g=>{p(o).command=g,p(o).text=m.value,x()}),class:"mt-lg"})])):w("",!0)],64))}},Dt={__name:"AIAssist",props:{text:{type:String,required:!0},characterLimit:{type:Number,default:1e3}},emits:["insert","replace","close"],setup(s,{emit:t}){const e=s,d=k(!1),o=k("spotlight"),_=k(""),$=V(()=>e.text===""||e.text==="<div></div>"),b=()=>{$.value&&(o.value="generator"),d.value=!0},m=()=>{d.value=!1,o.value="spotlight"},L=c=>{if(c!=="generate"){o.value="modifier",_.value=c;return}o.value="generator"},x=c=>{t("insert",c),m()},u=c=>{t("replace",c),m()};return(c,g)=>{const I=F("tooltip");return l(),v("div",null,[G((l(),y(ee,{onClick:b},{default:a(()=>[n(j)]),_:1})),[[I,"AI Assist"]]),n(ue,{show:d.value,onClose:m,"max-width":"md",closeable:!0,"scrollable-body":!0},{header:a(()=>[n(B,{class:"items-center"},{default:a(()=>[n(j,{class:"text-stone-800"}),h(" "+r(c.$t("ai.ai_assist")),1)]),_:1})]),body:a(()=>[o.value==="spotlight"?(l(),y(Re,{key:0,onSelectedCommand:L})):w("",!0),o.value==="generator"?(l(),y(at,{key:1,onInsert:x,characterLimit:s.characterLimit},null,8,["characterLimit"])):w("",!0),o.value==="modifier"?(l(),y(it,{key:2,onReplace:u,text:s.text,characterLimit:s.characterLimit,command:_.value},null,8,["text","characterLimit","command"])):w("",!0)]),_:1},8,["show"])])}}};export{Dt as default};
