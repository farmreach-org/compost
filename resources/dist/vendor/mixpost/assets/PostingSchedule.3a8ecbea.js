import{cE as P,I as w,Y as j,o as c,c as d,e as n,a as u,w as a,t as i,F as k,r as C,b as t,H as N,f as _,j as b,S as U,g as B,i as q,l as E,u as I,h as V,X as A,ct as W,T as H,cl as Y,Z,R as T,U as z,m as K,n as L}from"./app.af17fce1.js";import{_ as R}from"./PageHeader.fa50e47e.js";import{_ as S}from"./Panel.46137120.js";import{W as D}from"./constants.9689ba33.js";import{u as F}from"./useSettings.b8b0b777.js";import{_ as X}from"./Select.fb5ef007.js";import{E as G}from"./ExclamationCircle.2dc7440a.js";import{F as J,_ as M}from"./Switch.74000e7f.js";import{_ as O}from"./PureDangerButton.27630a26.js";import"./Flex.16a0de6f.js";import"./vue.runtime.esm-bundler.e6f20297.js";function Q(f,x){const l=f.querySelector(".flatpickr-hour").value,p=f.querySelector(".flatpickr-minute").value;if(x===24)return`${l}:${p}`;if(x===12){const g=f.querySelector(".flatpickr-am-pm").innerText;return P(`${l}:${p} ${g}`)}}const ee={class:"flex flex-col sm:flex-row gap-sm sm:gap-0"},te={value:"everyday"},se=["value"],oe={class:"mr-xs rtl:mr-0 rtl:ml-lg text-gray-400"},le={class:"text-sm flex items-center mt-md"},ie={class:"mr-xs rtl:mr-0 rtl:ml-xs"},ae={__name:"AddPostingTime",props:["modelValue"],emits:["update:modelValue"],setup(f,{emit:x}){const l=f,{timeZone:p,timeFormat:g}=F(),r=w({day:"everyday",time:"06:30"}),v=w(),y={inline:!0,timeFormat:"H:i",noCalendar:!0,enableTime:!0,time_24hr:g===24},$=()=>{const s=E.exports.cloneDeep(l.modelValue),o=r.value.day==="everyday";r.value.value=Q(v.value,g);const e=m=>{m.times.some(h=>h.value===r.value.time)||m.times.push({value:r.value.time})};if(o)s.forEach(e);else{const m=s.findIndex(h=>parseInt(h.id)===parseInt(r.value.day));m!==-1&&e(s[m])}x("update:modelValue",s)};return(s,o)=>{const e=j("tooltip");return c(),d(k,null,[n("div",ee,[n("div",null,[u(X,{modelValue:r.value.day,"onUpdate:modelValue":o[0]||(o[0]=m=>r.value.day=m)},{default:a(()=>[n("option",te,i(s.$t("posting_schedule.everyday")),1),(c(!0),d(k,null,C(t(D),m=>(c(),d("option",{key:m.id,value:m.id},i(s.$t(`calendar.weekdays.${m.key}.full`)),9,se))),128))]),_:1},8,["modelValue"])]),n("div",{class:N([{"sm:w-40":t(g)===12,"sm:w-56":t(g)===24},"pickTime flex items-center sm:justify-center sm:mr-lg sm:-mt-1"])},[n("div",oe,i(s.$t("general.time")),1),n("div",{class:"w-auto",ref_key:"timePicker",ref:v},[u(t(J),{modelValue:r.value.time,"onUpdate:modelValue":o[1]||(o[1]=m=>r.value.time=m),config:y},null,8,["modelValue"])],512)],2),n("div",null,[u(b,{onClick:$},{default:a(()=>[_(i(s.$t("posting_schedule.add_post_time")),1)]),_:1})])]),n("div",le,[n("div",ie,i(t(p)),1),U((c(),B(t(q),{href:s.route("mixpost.profile.index")},{default:a(()=>[u(G,{class:"!w-4 !h-4"})]),_:1},8,["href"])),[[e,s.$t("posting_schedule.posting_times_determined")]])])],64)}}},ne={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-xs"},re={class:"font-medium text-center"},ue={class:"flex justify-center mt-xs"},me={class:"mr-xs"},ce={key:0},de={key:1},pe={class:"flex flex-col justify-center mt-xs mx-auto"},_e={key:0,class:"text-gray-500 text-sm text-center"},fe=n("span",null,":",-1),ge={class:"flex absolute right-0 opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-200"},ve={__name:"PostingTimes",props:{times:{type:Array,default:[]}},emits:["update"],setup(f,{emit:x}){const l=f,{t:p}=I(),{timeFormat:g}=F(),r=s=>{const o=D.find(e=>e.id===s);return o?p(`calendar.weekdays.${o.key}.full`):null},v=s=>E.exports.sortBy(s.times,[e=>e.value]).map(e=>({originalValue:e.value,formatValue:y(e.value)})),y=s=>g===12?W(s,"hh:mm aaa"):s,$=(s,o)=>{const e=l.times[s].times.findIndex(m=>m.value===o);l.times[s].times.splice(e,1)};return(s,o)=>(c(),d("div",ne,[(c(!0),d(k,null,C(f.times,(e,m)=>(c(),d("div",{key:e.id,class:"flex flex-col border border-gray-300 rounded-lg p-xs"},[n("div",re,i(r(e.id)),1),n("div",ue,[u(M,{modelValue:e.status,"onUpdate:modelValue":h=>e.status=h},{default:a(()=>[n("span",me,[e.status?(c(),d("span",ce,i(t(p)("general.on")),1)):V("",!0),e.status?V("",!0):(c(),d("span",de,i(t(p)("general.off")),1))])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),n("div",pe,[e.times.length?V("",!0):(c(),d("span",_e,i(t(p)("general.empty")),1)),e.times.length?(c(!0),d(k,{key:1},C(v(e),h=>(c(),d("div",{key:h.value,class:"relative flex items-center justify-between px-lg py-xs group text-gray-500 text-sm"},[n("span",null,i(h.formatValue.split(":")[0]),1),fe,n("span",null,i(h.formatValue.split(":")[1]),1),n("span",ge,[u(O,{onClick:ye=>$(m,h.originalValue)},{default:a(()=>[u(A,{class:"!w-5 !-5"})]),_:2},1032,["onClick"])])]))),128)):V("",!0)])]))),128))]))}},he={class:"w-full mx-auto row-py"},xe={class:"w-full row-px"},Fe={__name:"PostingSchedule",props:{times:{required:!0,type:Array}},setup(f){const x=f,{t:l}=I(),p=K("workspaceCtx"),{notify:g}=L(),r=H({times:x.times}),v=w(!1),y=()=>{r.times.forEach(s=>{s.times=[]}),v.value=!1},$=()=>{r.put(route("mixpost.postingSchedule.update",{workspace:p.id}),{preserveScroll:!0,onSuccess(){g("success",l("posting_schedule.posting_times_updated"))}})};return(s,o)=>(c(),d(k,null,[u(t(Z),{title:t(l)("posting_schedule.posting_schedule")},null,8,["title"]),n("div",he,[u(R,{title:t(l)("posting_schedule.posting_schedule")},{description:a(()=>[_(i(t(l)("posting_schedule.send_posting_schedule")),1)]),_:1},8,["title"]),n("div",xe,[u(S,null,{title:a(()=>[_(i(t(l)("posting_schedule.add_new_posting_time")),1)]),default:a(()=>[u(ae,{modelValue:t(r).times,"onUpdate:modelValue":o[0]||(o[0]=e=>t(r).times=e)},null,8,["modelValue"])]),_:1}),u(S,{class:"mt-lg"},{title:a(()=>[_(i(t(l)("posting_schedule.posting_times")),1)]),description:a(()=>[_(i(t(l)("posting_schedule.send_posting_schedule")),1)]),action:a(()=>[u(T,{onClick:o[1]||(o[1]=e=>v.value=!0)},{default:a(()=>[_(i(t(l)("posting_schedule.clear_all_posting_times")),1)]),_:1})]),default:a(()=>[u(ve,{times:t(r).times},null,8,["times"])]),_:1}),u(b,{onClick:$,disabled:t(r).processing,class:"mt-md"},{default:a(()=>[_(i(t(l)("posting_schedule.update_posting_times")),1)]),_:1},8,["disabled"])])]),u(Y,{show:v.value,variant:"danger",onClose:o[3]||(o[3]=e=>v.value=!1)},{header:a(()=>[_(i(t(l)("posting_schedule.clear_all_posting_times")),1)]),body:a(()=>[_(i(t(l)("posting_schedule.confirmation_posting_times")),1)]),footer:a(()=>[u(T,{onClick:o[2]||(o[2]=e=>v.value=!1),class:"mr-xs"},{default:a(()=>[_(i(t(l)("general.cancel")),1)]),_:1}),u(z,{onClick:y},{default:a(()=>[_(i(t(l)("general.delete")),1)]),_:1})]),_:1},8,["show"])],64))}};export{Fe as default};
