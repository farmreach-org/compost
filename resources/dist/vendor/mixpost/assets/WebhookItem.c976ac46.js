import{u as x,m as w,O as E,B,Q as g,o as k,c as O,e as I,R as y,b as u,g as S,w as t,a as e,f as m,t as l,U as P,c5 as T,y as V}from"./app.17a8bbe4.js";import{_ as c,a as W}from"./TableCell.5981e30d.js";import{u as j}from"./useRouter.64f79ca8.js";import{_ as q}from"./PureButtonLink.d6da9c4f.js";import{P as A}from"./PencilSquare.b8b4716b.js";import{_ as p,a as L}from"./DropdownItem.409573e1.js";import{T as N}from"./Trash.0f2ffd20.js";import{_ as Q}from"./DropdownButton.f5aff106.js";import{Q as U}from"./QueueList.1a33fea2.js";import{_ as $}from"./Badge.82f1358a.js";const F={class:"flex flex-row items-center justify-end gap-xs"},z={__name:"WebhookItemAction",props:{itemId:{type:String,required:!0}},emits:["onDelete"],setup(s,{emit:d}){const o=s,{t:a}=x(),i=w("routePrefix"),f=w("confirmation"),n=w("workspaceCtx");E();const{onError:_}=j(),h=r=>{switch(r){case"edit":return n?route(`${i}.webhooks.edit`,{workspace:n.id,webhook:o.itemId}):route(`${i}.system.webhooks.edit`,{webhook:o.itemId});case"deliveries":return n?route(`${i}.webhooks.deliveries.index`,{workspace:n.id,webhook:o.itemId}):route(`${i}.system.webhooks.deliveries.index`,{webhook:o.itemId});case"delete":return n?route(`${i}.webhooks.delete`,{workspace:n.id,webhook:o.itemId}):route(`${i}.system.webhooks.delete`,{webhook:o.itemId});default:return""}},C=B(!1),R=()=>{f().title(a("webhook.delete_webhook")).description(a("webhook.delete_webhook_confirm")).destructive().onConfirm(r=>{b(r)}).show()},b=r=>{r.isLoading(!0),P.delete(h("delete"),{onSuccess(){C.value=!1,d("onDelete"),T.emit("webhookDeleted",o.itemId),r.reset()},onError(v){_(v,()=>{b(r)})},onFinish(){r.isLoading(!1)}})};return(r,v)=>{const D=g("tooltip");return k(),O("div",null,[I("div",F,[y((k(),S(q,{href:h("deliveries")},{default:t(()=>[e(U)]),_:1},8,["href"])),[[D,u(a)("webhook.deliveries")]]),e(L,{"width-classes":"w-36",placement:"bottom-end"},{trigger:t(()=>[e(Q)]),content:t(()=>[e(p,{href:h("edit")},{icon:t(()=>[e(A)]),default:t(()=>[m(" "+l(u(a)("general.edit")),1)]),_:1},8,["href"]),e(p,{onClick:R,as:"button"},{icon:t(()=>[e(N,{class:"text-red-500"})]),default:t(()=>[m(" "+l(u(a)("general.delete")),1)]),_:1})]),_:1})])])}}},G={class:"text-gray-500"},se={__name:"WebhookItem",props:{item:{type:Object,required:!0}},setup(s){const d=s,{t:o}=x(),a=()=>{switch(d.item.last_delivery_status){case"SUCCESS":return"success";case"ERROR":return"error";default:return"neutral"}},i=()=>{switch(d.item.last_delivery_status){case"SUCCESS":return o("webhook.last_delivery_succeeded");case"ERROR":return o("webhook.last_delivery_failed");default:return o("webhook.never_triggered")}};return(f,n)=>{const _=g("tooltip");return k(),S(W,{hoverable:!0},{default:t(()=>[e(c,{class:"w-10"},{default:t(()=>[V(f.$slots,"checkbox")]),_:3}),e(c,null,{default:t(()=>[y(e($,{variant:a(),class:"w-5 h-5 !rounded-full"},null,8,["variant"]),[[_,i()]])]),_:1}),e(c,null,{default:t(()=>[m(l(s.item.name),1)]),_:1}),e(c,null,{default:t(()=>[I("span",G,l(`${s.item.callback_url.slice(0,60)}`)+l(s.item.callback_url.length>60?"...":""),1)]),_:1}),e(c,null,{default:t(()=>[e($,{variant:s.item.active?"success":"error"},{default:t(()=>[m(l(s.item.active?u(o)("general.active"):u(o)("general.inactive")),1)]),_:1},8,["variant"])]),_:1}),e(c,null,{default:t(()=>[e(z,{itemId:s.item.id},null,8,["itemId"])]),_:1})]),_:3})}}};export{se as _};
