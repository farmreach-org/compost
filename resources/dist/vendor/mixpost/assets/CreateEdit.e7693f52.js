import{d as M,u as P,H as q,B as y,T as A,C as F,c as b,a as s,b as e,e as d,w as o,k as R,ac as U,F as H,l as W,o as k,Z as D,i as S,a0 as v,f as l,t as n,a1 as Z,h as g,_ as V,ab as G,a2 as J,$ as K,j as T,g as E,m as L,U as Q,n as X}from"./app.17a8bbe4.js";import{_ as Y}from"./Admin.fc0f4e28.js";import{u as ee}from"./usePageMode.dfbdd9f6.js";import{_ as oe}from"./PageHeader.cbe4fcaf.js";import{_ as se}from"./Panel.1e5e6be2.js";import{_ as te}from"./ColorPicker.a12f73e5.js";import{C as ae}from"./Avatar.0b768219.js";import{E as re}from"./Eye.e20c1588.js";import{T as le}from"./Trash.0f2ffd20.js";import{A as ne}from"./ArrowTopRightOnSquare.98b36170.js";import{_ as ce}from"./Flex.4b1efe4e.js";import"./UserMenu.1170533d.js";import"./DropdownItem.409573e1.js";import"./PencilSquare.b8b4716b.js";import"./Badge.82f1358a.js";import"./QueueList.1a33fea2.js";const ie={class:"row-py w-full mx-auto"},ue={key:0,class:"flex"},me={class:"row-px"},de=["onSubmit"],pe={for:"name"},fe={class:"w-full"},_e=M({layout:Y}),Be=Object.assign(_e,{__name:"CreateEdit",props:{mode:{required:!0,type:String,default:"create"},workspace:{type:Object}},setup(h){const p=h,{t}=P(),{notify:x}=X(),w=L("routePrefix"),O=L("confirmation"),$=q(()=>u.value?t("workspace.create_workspace"):t("workspace.edit_workspace")),{isCreate:u,isEdit:f}=ee(),m=y(!1),_=y(""),c=A({name:f.value?p.workspace.name:"",hex_color:f.value?p.workspace.hex_color:""}),B=()=>{c.hex_color=_.value,m.value=!1},N=()=>{const r=ae();return r[W.exports.random(0,r.length-1)]};F(()=>{if(u.value){const r=N();c.hex_color=r,_.value=r}f.value&&(_.value=p.workspace.hex_color)});const C=(r=!1)=>{c.transform(a=>({...a,login:r})).post(route(`${w}.workspaces.store`))},j=()=>{c.put(route(`${w}.workspaces.update`,{workspace:p.workspace.uuid}),{onSuccess:()=>{x("success",t("workspace.workspace_updated"))}})},z=()=>{O().title(t("workspace.delete_workspace")).description(t("workspace.confirm_delete_workspace")).destructive().onConfirm(r=>{r.isLoading(!0),Q.delete(route(`${w}.workspaces.delete`,{workspace:p.workspace.uuid}),{preserveScroll:!0,onSuccess(){x("success",t("workspace.workspace_deleted"))},onFinish(){r.reset()}})}).show()},I=()=>{u.value&&C(),f.value&&j()};return(r,a)=>(k(),b(H,null,[s(e(D),{title:e($)},null,8,["title"]),d("div",ie,[s(oe,{title:e($)},{default:o(()=>[e(f)?(k(),b("div",ue,[s(e(S),{href:r.route("mixpost.switchWorkspace",{workspace:h.workspace.uuid,redirect:!0}),method:"post",as:"button",type:"button",class:"mr-xs"},{default:o(()=>[s(v,{size:"sm"},{icon:o(()=>[s(ne)]),default:o(()=>[l(" "+n(e(t)("general.open")),1)]),_:1})]),_:1},8,["href"]),s(e(S),{href:r.route(`${e(w)}.workspaces.view`,{workspace:h.workspace.uuid}),class:"mr-xs"},{default:o(()=>[s(v,{size:"sm"},{icon:o(()=>[s(re)]),default:o(()=>[l(" "+n(e(t)("general.view")),1)]),_:1})]),_:1},8,["href"]),s(Z,{onClick:z,size:"sm"},{icon:o(()=>[s(le)]),_:1})])):g("",!0)]),_:1},8,["title"]),d("div",me,[d("form",{method:"post",onSubmit:R(I,["prevent"])},[s(se,null,{title:o(()=>[l(n(e(t)("general.details")),1)]),default:o(()=>[s(V,null,{title:o(()=>[d("label",pe,n(e(t)("general.name")),1)]),default:o(()=>[d("div",fe,[s(G,{modelValue:e(c).name,"onUpdate:modelValue":a[0]||(a[0]=i=>e(c).name=i),type:"text",id:"name",placeholder:e(t)("workspace.workspace_name"),class:"w-full",autocomplete:"off",autofocus:e(u),required:""},null,8,["modelValue","placeholder","autofocus"]),s(J,{message:e(c).errors.name,class:"mt-1"},null,8,["message"])])]),_:1}),s(V,{class:"mt-lg"},{title:o(()=>[l(" Color ")]),default:o(()=>[d("div",{onClick:a[1]||(a[1]=i=>m.value=!0),style:K({background:e(c).hex_color}),role:"button",type:"button",class:"w-xl h-xl rounded-md"},null,4)]),_:1}),s(ce,{class:"mt-lg"},{default:o(()=>[s(T,{type:"submit"},{default:o(()=>[l(n(e(u)?e(t)("general.create"):e(t)("general.update")),1)]),_:1}),e(u)?(k(),E(v,{key:0,onClick:a[2]||(a[2]=i=>C(!0)),type:"button",class:"ml-xs"},{default:o(()=>[l(n(e(t)("workspace.create_and_login")),1)]),_:1})):g("",!0)]),_:1})]),_:1})],40,de)])]),s(U,{show:m.value,"max-width":"md",onClose:a[5]||(a[5]=i=>m.value=!1)},{header:o(()=>[l(n(e(t)("workspace.change_workspace_color")),1)]),body:o(()=>[m.value?(k(),E(te,{key:0,modelValue:_.value,"onUpdate:modelValue":a[3]||(a[3]=i=>_.value=i)},null,8,["modelValue"])):g("",!0)]),footer:o(()=>[s(v,{onClick:a[4]||(a[4]=i=>m.value=!1),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:o(()=>[l(n(e(t)("general.cancel")),1)]),_:1}),s(T,{onClick:B},{default:o(()=>[l(n(e(t)("general.done")),1)]),_:1})]),_:1},8,["show"])],64))}});export{Be as default};
